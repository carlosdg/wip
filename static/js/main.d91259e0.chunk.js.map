{"version":3,"sources":["lib/grid/gridProperties.js","components/InteractiveGrid/Grid/Grid.js","components/DeleteButton/index.js","components/InteractiveGrid/Item/Item.js","components/InteractiveGrid/index.js","components/ImageComponent/Overlay.js","lib/RgbaImageBuffer/index.js","lib/coordinates.js","components/ImageComponent/index.js","components/HistogramComponent/index.js","components/HistogramAndInfoComponent/index.js","components/Toolbar/Submenus/FileSubmenu.js","components/Toolbar/Submenus/ImageSubmenu.js","components/Toolbar/Submenus/PointOperationsSubmenu/Dialogs/LinearTransformationDialog/InputCoordinate.js","components/Toolbar/Submenus/PointOperationsSubmenu/Dialogs/LinearTransformationDialog/index.js","lib/Checks.js","components/Toolbar/Submenus/PointOperationsSubmenu/Dialogs/BrightnessAndContrastDialog.js","components/Toolbar/Submenus/PointOperationsSubmenu/Dialogs/gammaCorrectionDialog.js","components/Toolbar/FilesListMenu.js","components/Toolbar/Submenus/PointOperationsSubmenu/Dialogs/ImageDifferenceDialog.js","components/Toolbar/Submenus/PointOperationsSubmenu/Dialogs/HistogramSpecificationDialog.js","components/Toolbar/Submenus/PointOperationsSubmenu/Dialogs/ChangesDetectionDialog.js","components/Toolbar/Submenus/PointOperationsSubmenu/index.js","components/Toolbar/Submenus/GeometricOperationsSubmenu/Dialogs/ImageRotationDialog.js","components/Toolbar/Submenus/GeometricOperationsSubmenu/Dialogs/ImageResizingDialog.js","components/Toolbar/Submenus/GeometricOperationsSubmenu/index.js","components/Toolbar/index.js","lib/Histogram.js","lib/ImageProcessing/grayscale.js","lib/ImageProcessing/transformImage.js","lib/Exceptions/ImageLoadException.js","lib/Exceptions/ValueOutOfBoundsException.js","lib/Exceptions/ImageOperationException.js","lib/ImageProcessing/linearTransformation.js","lib/ImageProcessing/brightnessAndContrastAdjustment.js","lib/ImageProcessing/gammaCorrection.js","lib/ImageProcessing/imagesDifference.js","lib/ImageProcessing/changesDetection.js","lib/ImageProcessing/histogramSpecification.js","lib/ImageProcessing/histogramEqualization.js","lib/ImageProcessing/crop.js","lib/ImageProcessing/imageRotation.js","lib/ImageProcessing/imageResizing.js","lib/ImageProcessing/mirrorOperations.js","lib/ImageProcessing/imageTranspose.js","lib/imageHelper.js","lib/grid/calculateLayout.js","lib/CumulativeHistogram.js","components/App/index.js","index.js","lib/ImageProcessing/interpolationMethods.js"],"names":["gridProperties","GRID_COLUMNS","lg","md","sm","xs","xxs","LAYOUT_BREAKPOINTS","DEFAULT_GRID_ITEM_COLS","DEFAULT_GRID_ITEM_ROWS","GRID_ITEM_ROW_HEIGHT","ResponsiveGrid","WidthProvider","Responsive","Grid","_ref","children","props","Object","objectWithoutProperties","react_default","a","createElement","assign","cols","GRID_PROPERTIES","breakpoints","rowHeight","defaultProps","objectSpread","layouts","DeleteButton","onDelete","className","onClick","disabled","aria-label","stopEvent","event","preventDefault","stopPropagation","Item","state","isDraggable","onDragHandleMouseDown","_this","setState","onDragHandleMouseUp","onDragStart","onMouseDown","onDragEnd","onMouseUp","id","onSelect","document","addEventListener","this","removeEventListener","_this$props","style","name","isSelected","concat","draggable","onFocus","tabIndex","components_DeleteButton","React","Component","onDeselect","InteractiveGrid","Overlay","position","width","right","left","height","bottom","top","backgroundColor","border","opacity","RgbaImageBuffer","pixels","classCallCheck","toImageData","copy","Uint8ClampedArray","getPixel","_ref3","x","y","Math","max","min","pixelPosition","_mapMatrixPositionToArray","NUM_CHANNELS","_width","_height","_pixels","data","_ref2","imgData","ImageData","set","mapToCoordinatesRelativeToElement","coords","parentElement","parentElementBoundingBox","clientX","ceil","clientY","mapToRelativeCoordinates","getBoundingClientRect","calculateRect","coords1","coords2","areCoordinatesAligned","ImageComponent","isImageLoading","isMouseDown","mouseDownOriginCoordinates","currentMouseCoordinates","onMouseMove","mouseEvent","coordinates","Coordinates","refs","canvas","pixel","rgbaImage","_this$state","_this$props$rgbaImage","onSelection","_calculateRect","context","getContext","putImageData","overlayPosition","ref","display","maxHeight","ImageComponent_Overlay","HistogramComponent","emphasizedValue","histogramVisualizationData","histogram","map","value","index","x0","_this2","es","margin","onMouseLeave","onNearestX","align","horizontal","vertical","fontSize","format","dataPoint","title","HistogramAndInfoComponent","currentTab","updateCurrentTab","_","newTab","_this$props$histogram","histogramValues","histogramInfo","counts","cHistogram","Fragment","justifyContent","Button_default","boxShadow","e","alignItems","components_HistogramComponent","maxWidth","Table_default","TableHead_default","TableRow_default","TableCell_default","numeric","TableBody_default","count","mean","toFixed","stdDev","minValue","maxValue","mode","entropy","FileSubmenu","open","handleToggle","handleClose","anchorEl","contains","target","onFileInputted","onFileInput","fileInputForm","reset","onDownload","buttonRef","node","aria-owns","undefined","aria-haspopup","color","Popper_default","transition","disablePortal","TransitionProps","placement","Grow_default","transformOrigin","Paper_default","ClickAwayListener_default","onClickAway","MenuList_default","htmlFor","MenuItem_default","hidden","type","accept","onChange","ImageSubmenu","onShowHistogram","onCrop","InputCoordinate","onYChange","number","Number","parseFloat","coordinate","isFinite","onXChange","TextField_default","placeholder","InputProps","startAdornment","InputAdornment_default","IconButton_default","Delete_default","styles","center","marginTop","marginBottom","LinearTransformationDialog","onDataChange","newData","prevState","coord","i","onDataDelete","filter","addNewCoordinate","newCoord","length","slice","toConsumableArray","onSubmit","Dialog_default","isOpen","onClose","scroll","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","xDomain","yDomain","fullWidth","variant","InputCoordinate_InputCoordinate","key","DialogActions_default","isInRange","inputsContainer","flexWrap","input","BrightnessAndContrastDialog","brightness","brightnessErrorMessage","contrast","contrastErrorMessage","formChanged","valueStateName","errorMessageStateName","minPossibleValue","maxPossibleValue","_this$setState2","_this$setState","defineProperty","onBrightnessChange","onContrastChange","error","label","String","oldBrightness","oldContrast","GammaCorrectionDialog","gamma","gammaErrorMessage","errorMessage","POSITIVE_INFINITY","onGammaChange","FilesListMenu","selectedIndex","handleClickListItem","currentTarget","handleMenuItemClick","selectedItemName","onItemSelection","classes","root","List_default","component","ListItem_default","isDisabled","button","menuTitle","ListItemText_default","primary","secondary","options","Menu_default","Boolean","option","selected","withStyles","theme","palette","background","paper","ImageDifferenceDialog","imgName","Toolbar_FilesListMenu","activeImagesNames","HistogramSpecificationDialog","ChangesDetectionDialog","rgbaColor","r","g","b","threshold","onImgNameChange","onThresholdChange","newValue","handleChangeComplete","rgb","lib","onChangeComplete","PointOperationsSubmenu","isLinearTransformDialogOpen","isLightnessAndContrastDialogOpen","isGammaCorrectionDialogOpen","isImageDifferenceDialogOpen","isHistogramSpecificationDialogOpen","isChangesDetectionDialogOpen","handleDialogOpen","dialogStateName","handleDialogClose","onGrayscale","histogramEqualization","LinearTransformationDialog_LinearTransformationDialog","linearTransformation","BrightnessAndContrastDialog_BrightnessAndContrastDialog","selectedImageInfo","brightnessAndContrastAdjustment","gammaCorrectionDialog_GammaCorrectionDialog","gammaValue","gammaCorrection","ImageDifferenceDialog_ImageDifferenceDialog","imagesDifference","HistogramSpecificationDialog_HistogramSpecificationDialog","histogramSpecification","ChangesDetectionDialog_ChangesDetectionDialog","userInput","changesDetection","ImageRotationDialog","degrees","degreesErrorMessage","rotateAndPaint","interpolationMethod","interpolationMethods","onDegreesChange","onRotateAndPaintChange","checked","onInterpolationMethodChange","FormControlLabel_default","control","Checkbox_default","ImageResizingDialog","oldWidth","widthPercentage","widthErrorMessage","oldHeight","heightPercentage","heightErrorMessage","onDimensionsChange","dimensionName","dimensionStateName","oldDimensionPropName","percentageStateName","isPercentage","dimension","percentage","floor","round","isNaN","onWidthChange","onHeightChange","onWidthPercentageChange","onHeightPercentageChange","endAdornment","GeometricOperationsSubmenu","isImageRotationDialogOpen","isImageResizingDialogOpen","verticalMirror","horizontalMirror","imageTranspose","ImageRotationDialog_ImageRotationDialog","imageRotation","ImageResizingDialog_ImageResizingDialog","imageResizing","AppToolbar","AppBar_default","Toolbar_default","FileSubmenu_FileSubmenu","ImageSubmenu_ImageSubmenu","PointOperationsSubmenu_PointOperationsSubmenu","GeometricOperationsSubmenu_GeometricOperationsSubmenu","Histogram","imagePixels","setImagePixels","Array","fill","reduce","previousValue","currentElement","sqrt","pow","maxIndex","maxCount","forEach","probability","log2","imageToGrayscale","imgBuffer","grayscaleStrategy","arguments","pixelToGrayscalePal","result","grayValue","rComponent","gComponent","bComponent","transformImage","lookupTable","ImageLoadException","Error","errorImageSrc","possibleConstructorReturn","getPrototypeOf","call","src","ImageOperationException","exceptionName","message","points","sections","newSection","slope","push","currentSectionIndex","frontier","yIntercept","newBrightness","newContrast","A","B","firstImgBuffer","secondImgBuffer","abs","changeHighlightColor","difference","originImageCHistogram","targetImageCHistogram","normalizedOriginImageCHistogram","normalizedTargetImageCHistogram","j","imageCHistogram","equalizationLevel","crop","_ref$top","_ref$left","_ref$height","_ref$width","resultPixels","currentIndex","yOffset","xOffset","rotateAndPaintRotation","radians","PI","directTransformation","xCoord","yCoord","cos","sin","newImageInfo","getRotatedImageInfo","transformedCoords","minXCoord","minYCoord","originalImagePixel","upperLeftCornerRotated","lowerLeftCornerRotated","upperRightCornerRotated","lowerRightCornerRotated","maxXCoord","maxYCoord","heighPercentage","widthFactor","heightFactor","newWidth","newHeight","loadFromObject","obj","URL","createObjectURL","image","Image","Promise","resolve","reject","onload","onerror","load","finally","revokeObjectURL","createNewSetOfLayouts","keys","layoutName","createNewElementLayoutInfo","Infinity","w","h","minW","minH","addNewElementsToLayouts","currentLayouts","newElementsIds","newElementsLayoutInfos","newLayouts","removeElementsFromLayout","ids","includes","CumulativeHistogram","App","imagesInfos","histogramInfos","gridLayouts","GridLayoutHelper","selectedGridItem","pixelCoords","pixelValue","removedImagesCount","notify","messageType","enqueueSnackbar","onMouseMoveOverImage","onImageRegionSelection","newRegion","info","region","addNewImage","imageBuffer","imageSection","imageKey","histogramKey","visible","onNewImageFromFile","files","ImageHelper","then","naturalWidth","naturalHeight","drawImage","getImageData","fromImageData","catch","isGridItemSelected","onGridLayoutChange","requestAnimationFrame","onGridItemSelection","deleteAllImageRelatedInfo","newSelectedItem","hideHistogram","showHistogramOfCurrentImage","_this$state$selectedG","downloadCurrentImage","_this$state$selectedG2","imgInfo","_imgInfo$region","imageData","toBlob","blob","imgUrl","downloadAnchor","href","click","currentImageToGrayscale","_this$state$selectedG3","currentImageLinearTransformation","_this$state$selectedG4","currentImageBrightnessAndContrastAdjustment","_this$state$selectedG5","currentImageGammaCorrection","_this$state$selectedG6","applyImagesDifference","otherImgName","_this$state$selectedG7","otherImageInfo","find","applyChangesDetection","_this$state$selectedG8","applyHistogramSpecification","_this$state$selectedG9","otherImgIndex","findIndex","_ref4","currentImageHistogramEqualization","_this$state$selectedG10","cropCurrentImage","_this$state$selectedG11","rotateCurrentImage","_ref5","_this$state$selectedG12","InterpolationMethods","resizeCurrentImage","_ref6","_this$state$selectedG13","currentImageVerticalMirror","_this$state$selectedG14","currentImageHorizontalMirror","_this$state$selectedG15","applyImageTranspose","_this$state$selectedG16","components_Toolbar","img","getGridComponent","getDisplayForPixelUnderMouse","download","onLayoutChange","getImageGridItem","getHistogramGridItem","element","_ref7","components_ImageComponent","_ref8","HistogramAndInfoComponent_HistogramAndInfoComponent","currentPixelRgbaValue","join","_this$state$selectedG17","sizeText","padding","borderRadius","withSnackbar","createMuiTheme","common","black","white","default","light","main","dark","contrastText","text","hint","typography","useNextVariants","ReactDOM","render","core_styles","build","maxSnack","anchorOrigin","action","size","Date","now","components_App","getElementById","module","exports","Bilinear","C","D","p","q","Closest Neighbour"],"mappings":"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","file":"static/js/main.d91259e0.chunk.js","sourcesContent":["/**\n * Object defining the constants properties of the Grids\n */\nexport default {\n  GRID_COLUMNS: { lg: 10, md: 8, sm: 6, xs: 4, xxs: 2 },\n  LAYOUT_BREAKPOINTS: { lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 },\n  DEFAULT_GRID_ITEM_COLS: 2, // Number of columns each item is tall on creation\n  DEFAULT_GRID_ITEM_ROWS: 4, // Number of rows each item is wide on creation\n  GRID_ITEM_ROW_HEIGHT: 50 // Height in number pixels of each row\n};","import React from \"react\";\nimport { WidthProvider, Responsive } from \"react-grid-layout\";\nimport GRID_PROPERTIES from \"../../../lib/grid/gridProperties\";\n\nconst ResponsiveGrid = WidthProvider(Responsive);\n\n/**\n * react-grid-layout responsive grid with some default props given as defined in\n * gridProperties: cols, breakpoints and rowHeight\n */\nconst Grid = ({ children, ...props }) => {\n  return (\n    <ResponsiveGrid\n      cols={GRID_PROPERTIES.GRID_COLUMNS}\n      breakpoints={GRID_PROPERTIES.LAYOUT_BREAKPOINTS}\n      rowHeight={GRID_PROPERTIES.GRID_ITEM_ROW_HEIGHT}\n      {...props}\n    >\n      {children}\n    </ResponsiveGrid>\n  );\n};\n\nGrid.propTypes = ResponsiveGrid.propTypes;\nGrid.defaultProps = { layouts: {}, ...ResponsiveGrid.defaultProps };\n\nexport default Grid;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./DeleteButton.css\";\n\n/**\n * Delete button component. Renders a circular button with a\n * cross to let the user know that they can delete something.\n *\n * The parent component is notified when the user wants to\n * delete via the `onDelete` prop. If `onDelete` is not\n * provided, the button will be rendered as a disabled button\n */\nconst DeleteButton = ({ onDelete, ...props }) => (\n  <button\n    className=\"DeleteButton\"\n    onClick={onDelete}\n    disabled={!onDelete}\n    aria-label=\"delete\"\n    {...props}\n  >\n    \n  </button>\n);\n\nDeleteButton.propTypes = {\n  onDelete: PropTypes.func\n};\n\nDeleteButton.defaultProps = {\n  onDelete: null\n};\n\nexport default DeleteButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DeleteButton from \"../../DeleteButton\";\nimport \"./Item.css\";\n\n/** Helper method to prevent the default behaviour and stop the propagation of\n * an event */\nconst stopEvent = event => {\n  event.preventDefault();\n  event.stopPropagation();\n};\n\n/**\n * Grid Item component. Forces grid items to be draggable only by a toolbar at\n * the top and also allows to listen to delete events (renders a delete button\n * and the event fires when the user wants to delete the item). It can also\n * notifiy when the user selects and deselects this component via props\n */\nexport default class Item extends React.Component {\n  /** The rest of the props are provided by the grid */\n  static propTypes = {\n    id: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n      PropTypes.symbol,\n      PropTypes.object\n    ]).isRequired,\n    name: PropTypes.string,\n    onDelete: PropTypes.func,\n    onSelect: PropTypes.func,\n    isSelected: PropTypes.bool\n  };\n\n  static defaultProps = {\n    name: \"\",\n    onDelete: null,\n    onSelect: null,\n    onDeselect: null,\n    isSelected: false\n  };\n\n  /** We only want to allow the item being drag when the user is trying to drag\n   * it from a part of the item, a toolbar at the top */\n  state = {\n    isDraggable: false\n  };\n\n  /**\n   * Listen for document mouse up event so we can react to it even if the users\n   * triggers it out of this element\n   */\n  componentDidMount() {\n    document.addEventListener(\"mouseup\", this.onDragHandleMouseUp);\n  }\n\n  /**\n   * Clean the mouse up listener from the document when the component will be\n   * unmounted\n   */\n  componentWillUnmount() {\n    document.removeEventListener(\"mouseup\", this.onDragHandleMouseUp);\n  }\n\n  /** Update the state to allow the item be dragged only when the user is\n   * clicking on the top toolbar */\n  onDragHandleMouseDown = () => this.setState({ isDraggable: true });\n\n  /** Update the state to forbid the item being dragged when the user stops\n   * clicking the top toolbar. This listener is attached to the document so it\n   * works even if the user drags the element out of the viewport and releses\n   * the mouse there */\n  onDragHandleMouseUp = () =>\n    this.state.isDraggable &&\n    this.setState({\n      isDraggable: false\n    });\n\n  /** Listener for the drag start event, but only allow the drag behaviour if\n   * the state says so */\n  onDragStart = event => {\n    if (this.state.isDraggable) {\n      stopEvent(event);\n      this.props.onMouseDown && this.props.onMouseDown(event);\n    }\n  };\n\n  /** Listener for the drag end event */\n  onDragEnd = event => {\n    if (this.state.isDraggable) {\n      stopEvent(event);\n      this.props.onMouseUp && this.props.onMouseUp(event);\n    }\n  };\n\n  /** When the user wants to delete the item, call the props `onDelete` callback\n   * with the ID of this element */\n  onDelete = () => this.props.onDelete(this.props.id);\n\n  /** When the user selects this item, call the props `onSelect` callback with\n   * the ID of this element */\n  onSelect = () => this.props.onSelect(this.props.id);\n\n  render() {\n    const {\n      children,\n      className,\n      style,\n      name,\n      onSelect,\n      onDelete,\n      isSelected\n    } = this.props;\n\n    return (\n      <div\n        className={`Item ${className} ${isSelected && \"is-selected\"}`}\n        style={style}\n        draggable={this.state.isDraggable}\n        onDragStart={this.onDragStart}\n        onMouseUp={this.onDragEnd} // OnMouseUp instead of DragEnd because DragStart prevents default\n        onFocus={onSelect ? this.onSelect : null}\n        tabIndex=\"0\"\n      >\n        <div onMouseDown={this.onDragHandleMouseDown} className=\"Item__toolbar\">\n          <DeleteButton\n            onMouseDown={stopEvent}\n            onDelete={onDelete ? this.onDelete : null}\n          />\n          <span className=\"Item__name\">{name}</span>\n        </div>\n        <div className=\"Item__childrenContainer\">{children}</div>\n      </div>\n    );\n  }\n}\n","import Grid from \"./Grid/Grid\";\nimport Item from \"./Item/Item\";\n\nexport default {\n  Grid,\n  Item\n};\n","import React from \"react\";\n\n/**\n * Rectangle to show when the user is dragging the mouse over a canvas to\n * select a part of it\n */\nconst Overlay = ({ position }) => (\n  <div\n    style={{\n      width: `${position.right - position.left}px`,\n      height: `${position.bottom - position.top}px`,\n      position: \"absolute\",\n      top: position.top + \"px\",\n      left: position.left + \"px\",\n      right: position.right + \"px\",\n      bottom: position.bottom + \"px\",\n      backgroundColor: \"#99ccff\",\n      border: \"1px solid #0000DD\",\n      opacity: \"0.3\"\n    }}\n  />\n);\n\nexport default Overlay;\n","// TODO: pollyfill ImageData constructor\n/**\n * Class to represent a RGBA pixel matrix (an image). This class aims to\n * abstract away the pixel related manipulations by providing a set of\n * convenience methods for iterating through pixels.\n */\nexport default class RgbaImageBuffer {\n  /** Number of channels in a RGBA pixel */\n  static NUM_CHANNELS = 4;\n\n  /**\n   * Convenient function to create a RgbaImage instance from an ImageData object\n   * where the width, height are copied but the pixel array is only copied the\n   * references\n   *\n   * @param {ImageData} imgData ImageData instance to create the RgbaImage from\n   * @returns {RgbaImageBuffer} Instance of RgbaImage initialized from the ImgData\n   */\n  static fromImageData({ width, height, data }) {\n    return new RgbaImageBuffer(width, height, data);\n  }\n\n  /**\n   * Convenient function to create an ImageData object from a RgbaImage object\n   *\n   * @param {RgbaImageBuffer} rgbaImage Instance of RgbaImage used to create the\n   * ImageData\n   * @returns {ImageData} ImageData instance with a copy of the width, height\n   * and pixels of the given RgbaImage\n   */\n  static toImageData({ width, height, pixels }) {\n    const imgData = new ImageData(width, height);\n    imgData.data.set(pixels);\n\n    return imgData;\n  }\n\n  /**\n   * Creates an instance of this class. Note: this treats the given pixels as\n   * RGBA pixels\n   *\n   * @param {number} width Pixel matrix width\n   * @param {number} height Pixel matrix height\n   * @param {Uint8ClampedArray} pixels TypedArray of RGBA Pixels\n   */\n  constructor(width, height, pixels) {\n    // TODO: check that everything is right (width, height > 0; width * height *\n    // rgbaDimension = pixels.length; etc)\n    this._width = width;\n    this._height = height;\n    this._pixels = pixels;\n  }\n\n  /** Alias for RgbaImage.toImageData(instanceOfRgbaImage) */\n  toImageData = () => RgbaImageBuffer.toImageData(this);\n\n  /** Returns a deep copy of this RgbaImage instance */\n  copy = () =>\n    new RgbaImageBuffer(\n      this.width,\n      this.height,\n      new Uint8ClampedArray(this.pixels)\n    );\n\n  /**\n   * Returns the pixel value at the given position\n   *\n   * @param {Object} coordinates Matrix coordinates of the pixel to get\n   * @param {number} coordinates.x Horizontal coordinate\n   * @param {number} coordinates.y Vertical coordinate\n   * @returns {Array} Pixel value at the given coordinates (an array with one\n   *  element per pixel dimension, 4 in case of RGBA for example)\n   */\n  getPixel = ({ x, y }) => {\n    x = Math.max(0, Math.min(this.width - 1, x));\n    y = Math.max(0, Math.min(this.height - 1, y));\n\n    const pixelPosition = this._mapMatrixPositionToArray(x, y);\n\n    // We tested this way and it turned to be much more performant than using slice\n    return [\n      this.pixels[pixelPosition],\n      this.pixels[pixelPosition + 1],\n      this.pixels[pixelPosition + 2],\n      this.pixels[pixelPosition + 3]\n    ];\n  };\n\n  /**\n   * @returns {Uint8ClampedArray} Pixels values of the image, an element for\n   * each pixel dimension (4 in case of RGBA for example)\n   */\n  get pixels() {\n    return this._pixels;\n  }\n\n  /** @returns {number} The width of the image */\n  get width() {\n    return this._width;\n  }\n\n  /** @returns {number} The height of the image */\n  get height() {\n    return this._height;\n  }\n\n  /**\n   * Given a coordinate in matrix space (2 dimensions) this method returns the\n   * corresponding coordinate in vector space (1 dimension).\n   *\n   * @param {number} x Horizontal coordinate\n   * @param {number} y Vertical coordinate\n   * @returns {number} Corresponding vector coordinate\n   */\n  _mapMatrixPositionToArray = (x, y) =>\n    (y * this.width + x) * RgbaImageBuffer.NUM_CHANNELS;\n}\n","/**\n * Maps the given coordinates with respect to the viewport to coordinates\n * with respect to the given element\n *\n * @param {Object} coords Coordinates to map to relative coordinates\n * @param {number} coords.clientX Horizontal coordinate with respect to the app viewport\n * @param {number} coords.clientY Vertical coordinate with respect to the app viewport\n * @param {Element} parentElement Element to get the bounding box from to\n * map the given coordinates to be relative to this element\n * @returns {Object} {x, y} Mouse coordinates with respect to the given element\n */\nexport function mapToCoordinatesRelativeToElement(coords, parentElement) {\n  return mapToRelativeCoordinates(\n    coords,\n    parentElement.getBoundingClientRect()\n  );\n}\n\n/**\n * Maps the mouse coordinates from the given mouse event to relative\n * coordinates with respect to the given element bounding box\n *\n * @param {Object} coords Coordinates to map to relative coordinates\n * @param {number} coords.clientX Horizontal coordinate with respect to the app viewport\n * @param {number} coords.clientY Vertical coordinate with respect to the app viewport\n * @param {DOMRectReadOnly} parentElementBoundingBox Bounding box where to\n * map the coordinates to\n * @returns{Object} {x, y} Mouse coordinates with respect the given bounding box\n */\nexport function mapToRelativeCoordinates(coords, parentElementBoundingBox) {\n  const { top, left } = parentElementBoundingBox;\n\n  // Top and left can be real numbers. If, for example, top = 66.19\n  // it means that the top of the element is at 66.19 CSS pixels\n  // from the top of the viewport. However we want to map that\n  // to integer values. The mouse position is relative to the viewport and it is\n  // an integer value. If the element top is at 66.19 CSS pixels from the top of the\n  // viewport then the first integer pixel would be 67. Cannot be 66 because\n  // there aren't element pixels below 66.19. So to consider the top and\n  // left values as integers we have to consider the ceiling.\n\n  return {\n    x: coords.clientX - Math.ceil(left),\n    y: coords.clientY - Math.ceil(top)\n  };\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Overlay from \"./Overlay\";\nimport RgbaImageBuffer from \"../../lib/RgbaImageBuffer\";\nimport * as Coordinates from \"../../lib/coordinates\";\n\n/**\n * Returns an object defining the rectangle given by the two coordinates\n *\n * @param {Object} coords1 {x: number, y: number} First corner of the rectangle\n * @param {Object} coords2 {x: number, y: number} First corner of the rectangle\n * @returns {Object} { left, right, top, bottom } An object defining the sides\n * of the rectangle\n */\nconst calculateRect = (coords1, coords2) => {\n  const left = Math.min(coords1.x, coords2.x);\n  const right = Math.max(coords1.x, coords2.x);\n  const top = Math.min(coords1.y, coords2.y);\n  const bottom = Math.max(coords1.y, coords2.y);\n\n  return { left, right, top, bottom };\n};\n\n/**\n * Returns whether the two given coordinates form a rectangle with a width or\n * height of 0 or not.\n *\n * @param {Object} coords1 {x: number, y: number}\n * @param {Object} coords2 {x: number, y: number}\n * @returns {boolean} Whether the two coordinates define a rectangle with some\n * dimension of 0\n */\nconst areCoordinatesAligned = (coords1, coords2) =>\n  coords1.x === coords2.x || coords1.y === coords2.y;\n\n// FIXME: the selection functionality doesn't work well when:\n// - The mouse up event is done outside the component\n// - The user wants to select a part passing the scroll\n/**\n * Component that renders an image from the given RgbaImage instance\n */\nclass ImageComponent extends Component {\n  static propTypes = {\n    /** RgbaImage instance to render */\n    rgbaImage: PropTypes.instanceOf(RgbaImageBuffer).isRequired,\n    /** Callback called with the mouse position relative to the\n     * image and the pixel value at that position */\n    onMouseMove: PropTypes.func,\n    /** Called when the user selects a region of the image */\n    onSelection: PropTypes.func.isRequired\n  };\n\n  static defaultProps = {\n    onMouseMove: null\n  };\n\n  /** Component state */\n  state = {\n    /** Flag to know if the image is currently being loaded */\n    isImageLoading: false,\n    /** Flag to know if the user clicked and is holding the mouse down */\n    isMouseDown: false,\n    /** Coordinates of the mouse when the user started pressing it */\n    mouseDownOriginCoordinates: { x: -1, y: -1 },\n    /** Current mouse coordinates relative to the image viewport */\n    currentMouseCoordinates: { x: -1, y: -1 }\n  };\n\n  componentDidMount() {\n    // Try to get the image and draw it to the canvas If there is an error\n    // update the state.error\n    const canvas = this.refs.canvas;\n    const context = canvas.getContext(\"2d\");\n\n    canvas.width = this.props.rgbaImage.width;\n    canvas.height = this.props.rgbaImage.height;\n    context.putImageData(this.props.rgbaImage.toImageData(), 0, 0);\n\n    this.setState({\n      isImageLoading: false\n    });\n  }\n\n  /** Mouse move event handler, gets the coordinates relative to the image where\n   * the user mouse is pointing to and the pixel RGBA value there and calls\n   * props.onMouseMove */\n  onMouseMove = mouseEvent => {\n    if (!this.props.onMouseMove || this.state.isImageLoading) {\n      return;\n    }\n\n    const coordinates = Coordinates.mapToCoordinatesRelativeToElement(\n      mouseEvent,\n      this.refs.canvas\n    );\n    const pixel = this.props.rgbaImage.getPixel(coordinates);\n\n    if (this.state.isMouseDown) {\n      this.setState({\n        currentMouseCoordinates: coordinates\n      });\n    }\n\n    this.props.onMouseMove(coordinates, pixel);\n  };\n\n  /**\n   * Event listener for the mouse down event. Updates the state to know that the\n   * user wants to select a part of the image and sets the origin mouse\n   * coordinate\n   */\n  onMouseDown = mouseEvent => {\n    const coordinates = Coordinates.mapToCoordinatesRelativeToElement(\n      mouseEvent,\n      this.refs.canvas\n    );\n\n    this.setState({\n      mouseDownOriginCoordinates: coordinates,\n      isMouseDown: true,\n      currentMouseCoordinates: coordinates\n    });\n  };\n\n  /**\n   * Event listener for the mouse up event. Updates the state to know that the\n   * user stopped the selection of the part of the image. Then, if the resulting\n   * rectangle has 0 width or height it is discarted.\n   *\n   * MAYBE TODO: set the current mouse coordinate to the ones on mouse up TODO:\n   * notify the parent component of the selection\n   */\n  onMouseUp = () => {\n    const {\n      isMouseDown,\n      mouseDownOriginCoordinates,\n      currentMouseCoordinates\n    } = this.state;\n\n    if (!isMouseDown) {\n      return;\n    }\n\n    if (\n      areCoordinatesAligned(mouseDownOriginCoordinates, currentMouseCoordinates)\n    ) {\n      this.setState({\n        isMouseDown: false,\n        mouseDownOriginCoordinates: { x: -1, y: -1 },\n        currentMouseCoordinates: { x: -1, y: -1 }\n      });\n      const { width, height } = this.props.rgbaImage;\n      this.props.onSelection({ top: 0, left: 0, width, height });\n    } else {\n      this.setState({ isMouseDown: false });\n      const { top, left, right, bottom } = calculateRect(\n        mouseDownOriginCoordinates,\n        currentMouseCoordinates\n      );\n      this.props.onSelection({\n        top,\n        left,\n        width: right - left + 1,\n        height: bottom - top + 1\n      });\n    }\n  };\n\n  render() {\n    const overlayPosition = calculateRect(\n      this.state.mouseDownOriginCoordinates,\n      this.state.currentMouseCoordinates\n    );\n\n    // TODO: check if loading\n    return (\n      <div\n        style={{\n          position: \"relative\"\n        }}\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onMouseMove={this.onMouseMove}\n      >\n        <canvas\n          ref=\"canvas\"\n          style={{\n            display: \"block\",\n            backgroundColor: \"#eee\",\n            maxHeight: \"100%\"\n          }}\n        />\n        <Overlay position={overlayPosition} />\n      </div>\n    );\n  }\n}\n\nexport default ImageComponent;\n","import React, { Component } from \"react\";\nimport \"react-vis/dist/style.css\";\nimport {\n  FlexibleXYPlot,\n  XAxis,\n  YAxis,\n  VerticalGridLines,\n  HorizontalGridLines,\n  VerticalRectSeries,\n  Hint\n} from \"react-vis\";\n\nclass HistogramComponent extends Component {\n  state = {\n    emphasizedValue: null,\n    histogramVisualizationData: []\n  };\n\n  componentDidMount() {\n    this.setState({\n      histogramVisualizationData: this.props.histogram.map(\n        (value, index) => ({ x0: index, x: index + 1, y: value })\n      )\n    });\n  }\n\n  render() {\n    return (\n      <FlexibleXYPlot\n        margin={{\n          top: 50,\n          left: 70\n        }}\n        onMouseLeave={() => this.setState({ emphasizedValue: null })}\n      >\n        <VerticalGridLines />\n        <HorizontalGridLines />\n        <XAxis />\n        <YAxis />\n        <VerticalRectSeries\n          onNearestX={value => this.setState({ emphasizedValue: value })}\n          data={this.state.histogramVisualizationData}\n        />\n        {this.state.emphasizedValue ? (\n          <Hint\n            value={this.state.emphasizedValue}\n            align={{ horizontal: \"auto\", vertical: \"top\" }}\n            style={{ fontSize: 14 }}\n            format={dataPoint => {\n              return [\n                {\n                  title: \"Value: \" + dataPoint.x0,\n                  value: \"Count: \" + dataPoint.y\n                }\n              ];\n            }}\n          />\n        ) : null}\n      </FlexibleXYPlot>\n    );\n  }\n}\n\nexport default HistogramComponent;\n","import React from \"react\";\nimport HistogramComponent from \"../HistogramComponent\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\n\n/**\n * Renders the given histogram and its information\n */\nexport default class HistogramAndInfoComponent extends React.Component {\n  state = {\n    currentTab: 0\n  };\n\n  updateCurrentTab = (_, newTab) => this.setState({ currentTab: newTab });\n\n  render() {\n    const { currentTab } = this.state;\n    const { histogramValues, histogramInfo } = this.props.histogram;\n    const { counts } = this.props.cHistogram;\n\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\"\n          }}\n        >\n          <Button\n            style={\n              currentTab === 0\n                ? {\n                    boxShadow: \"0px 4px 6px -5px black\"\n                  }\n                : {}\n            }\n            onClick={e => this.updateCurrentTab(e, 0)}\n          >\n            Hist.\n          </Button>\n          <Button\n            style={\n              currentTab === 1\n                ? {\n                    boxShadow: \"0px 4px 6px -5px black\"\n                  }\n                : {}\n            }\n            onClick={e => this.updateCurrentTab(e, 1)}\n          >\n            Cumul.\n          </Button>\n          <Button\n            style={\n              currentTab === 2\n                ? {\n                    boxShadow: \"0px 4px 6px -5px black\"\n                  }\n                : {}\n            }\n            onClick={e => this.updateCurrentTab(e, 2)}\n          >\n            Info.\n          </Button>\n        </div>\n        <div\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n            maxHeight: \"80%\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          }}\n        >\n          {currentTab === 0 && (\n            <HistogramComponent histogram={histogramValues} />\n          )}\n          {currentTab === 1 && (\n            <HistogramComponent histogram={counts} />\n          )}\n          {currentTab === 2 && (\n            <div\n              className=\"scrollable\"\n              style={{\n                maxWidth: \"500px\"\n              }}\n            >\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Variable</TableCell>\n                    <TableCell numeric>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  <TableRow>\n                    <TableCell>Count</TableCell>\n                    <TableCell numeric>{histogramInfo.count}</TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell>Brightness</TableCell>\n                    <TableCell numeric>\n                      {histogramInfo.mean.toFixed(3)}\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell>Contrast</TableCell>\n                    <TableCell numeric>\n                      {histogramInfo.stdDev.toFixed(3)}\n                    </TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell>Minimum value</TableCell>\n                    <TableCell numeric>{histogramInfo.minValue}</TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell>Maximum value</TableCell>\n                    <TableCell numeric>{histogramInfo.maxValue}</TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell>Mode</TableCell>\n                    <TableCell numeric>{histogramInfo.mode.value}</TableCell>\n                  </TableRow>\n                  <TableRow>\n                    <TableCell>Entropy</TableCell>\n                    <TableCell numeric>{histogramInfo.entropy}</TableCell>\n                  </TableRow>\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuList from \"@material-ui/core/MenuList\";\n\n/**\n * \"File\" Appbar Dropdown menu. Contains all the options that the user can\n * choose about files (upload, download, etc)\n */\nexport default class FileSubmenu extends React.Component {\n  static propTypes = {\n    onFileInput: PropTypes.func.isRequired,\n    onDownload: PropTypes.func.isRequired\n  };\n\n  state = {\n    open: false\n  };\n\n  handleToggle = () => {\n    this.setState(state => ({ open: !state.open }));\n  };\n\n  handleClose = event => {\n    if (this.anchorEl.contains(event.target)) {\n      return;\n    }\n\n    this.setState({ open: false });\n  };\n\n  onFileInputted = event => {\n    this.props.onFileInput(event);\n    this.refs.fileInputForm.reset();\n  };\n\n  onDownload = event => {\n    this.handleClose(event);\n    this.props.onDownload();\n  };\n\n  render() {\n    const { open } = this.state;\n\n    return (\n      <div>\n        <Button\n          buttonRef={node => {\n            this.anchorEl = node;\n          }}\n          aria-owns={open ? \"menu-list-grow\" : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.handleToggle}\n          color=\"inherit\"\n        >\n          File\n        </Button>\n        <Popper open={open} anchorEl={this.anchorEl} transition disablePortal>\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              id=\"menu-list-grow\"\n              style={{\n                transformOrigin:\n                  placement === \"bottom\" ? \"center top\" : \"center bottom\"\n              }}\n            >\n              <Paper>\n                <ClickAwayListener onClickAway={this.handleClose}>\n                  <MenuList>\n                    <label htmlFor=\"image-input\">\n                      <MenuItem onClick={this.handleClose}>Open</MenuItem>\n                    </label>\n                    <MenuItem onClick={this.onDownload}>\n                      Download Selected\n                    </MenuItem>\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n        <form ref=\"fileInputForm\">\n          <input\n            hidden\n            id=\"image-input\"\n            type=\"file\"\n            accept=\"image/*\"\n            name=\"image-input\"\n            onChange={this.onFileInputted}\n          />\n        </form>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuList from \"@material-ui/core/MenuList\";\n\n/**\n * \"Image\" Appbar Dropdown menu. Contains all the general options that the user\n * can choose about an image (see histogram, crop, etc)\n */\nexport default class ImageSubmenu extends React.Component {\n  static propTypes = {\n    onShowHistogram: PropTypes.func.isRequired,\n    onCrop: PropTypes.func.isRequired\n  };\n\n  state = {\n    open: false\n  };\n\n  handleToggle = () => {\n    this.setState(state => ({ open: !state.open }));\n  };\n\n  handleClose = event => {\n    if (this.anchorEl.contains(event.target)) {\n      return;\n    }\n\n    this.setState({ open: false });\n  };\n\n  onShowHistogram = event => {\n    this.handleClose(event);\n    this.props.onShowHistogram();\n  };\n\n  onCrop = event => {\n    this.handleClose(event);\n    this.props.onCrop();\n  };\n\n  render() {\n    const { open } = this.state;\n\n    return (\n      <div>\n        <Button\n          buttonRef={node => {\n            this.anchorEl = node;\n          }}\n          aria-owns={open ? \"menu-list-grow\" : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.handleToggle}\n          color=\"inherit\"\n        >\n          Image\n        </Button>\n        <Popper open={open} anchorEl={this.anchorEl} transition disablePortal>\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              id=\"menu-list-grow\"\n              style={{\n                transformOrigin:\n                  placement === \"bottom\" ? \"center top\" : \"center bottom\"\n              }}\n            >\n              <Paper>\n                <ClickAwayListener onClickAway={this.handleClose}>\n                  <MenuList>\n                    <MenuItem onClick={this.onShowHistogram}>\n                      Histogram\n                    </MenuItem>\n                    <MenuItem onClick={this.onCrop}>Crop</MenuItem>\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\n/**\n * Coordinate input component to ask the user for the coordinates of a point\n */\nexport default class InputCoordinate extends React.Component {\n  static propTypes = {\n    /** Current value of the coordinate */\n    coordinate: PropTypes.object.isRequired,\n    /** Listener for coordinate changes */\n    onChange: PropTypes.func.isRequired,\n    /** Listener for coordinate delete */\n    onDelete: PropTypes.func.isRequired\n  };\n\n  onYChange = e => {\n    const number = Number.parseFloat(e.target.value);\n    this.props.onChange({\n      ...this.props.coordinate,\n      y: Number.isFinite(number) ? number : \"\"\n    });\n  };\n\n  onXChange = e => {\n    const number = Number.parseFloat(e.target.value);\n    this.props.onChange({\n      ...this.props.coordinate,\n      x: Number.isFinite(number) ? number : \"\"\n    });\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          width: \"100%\"\n        }}\n      >\n        <TextField\n          type=\"number\"\n          placeholder=\"0\"\n          value={this.props.coordinate.x}\n          onChange={this.onXChange}\n          margin=\"dense\"\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">x: </InputAdornment>\n            )\n          }}\n        />\n        <TextField\n          type=\"number\"\n          placeholder=\"0\"\n          value={this.props.coordinate.y}\n          onChange={this.onYChange}\n          margin=\"dense\"\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">y: </InputAdornment>\n            )\n          }}\n        />\n        <IconButton aria-label=\"Delete\" onClick={this.props.onDelete}>\n          <DeleteIcon />\n        </IconButton>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport {\n  XYPlot,\n  XAxis,\n  YAxis,\n  HorizontalGridLines,\n  LineSeries\n} from \"react-vis\";\nimport InputCoordinate from \"./InputCoordinate\";\n\nconst styles = {\n  center: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    marginTop: \"1rem\",\n    marginBottom: \"1rem\"\n  }\n};\n\n/**\n * Dialog to ask the user for the linear sections for a linear transformation\n */\nexport default class LinearTransformationDialog extends React.Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired\n  };\n\n  state = {\n    /** List of coordinates */\n    data: [{ x: 0, y: 0 }, { x: 255, y: 255 }]\n  };\n\n  /** Returns a listener for when the user changes some coordinate */\n  onDataChange = index => newData => {\n    this.setState(prevState => ({\n      data: prevState.data.map((coord, i) => (i === index ? newData : coord))\n    }));\n  };\n\n  /** Returns a listener for when the user deletes some coordinate */\n  onDataDelete = index => () => {\n    this.setState(prevState => ({\n      data: prevState.data.filter((_, i) => i !== index)\n    }));\n  };\n\n  /** Listener for when the user wants to add a new coordinate */\n  addNewCoordinate = () => {\n    const newCoord =\n      this.state.data.length < 1\n        ? { x: 0, y: 0 }\n        : this.state.data.slice(-1)[0];\n\n    this.setState(prevState => ({ data: [...prevState.data, newCoord] }));\n  };\n\n  onSubmit = () => this.props.onSubmit(this.state.data);\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Linear Sections</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, enter the points to define the begin and end of each linear\n            section\n          </DialogContentText>\n          <div style={styles.center}>\n            <XYPlot width={300} height={300}>\n              <HorizontalGridLines />\n              <LineSeries\n                data={this.state.data}\n                xDomain={[0, 255]}\n                yDomain={[0, 255]}\n              />\n              <XAxis />\n              <YAxis />\n            </XYPlot>\n          </div>\n          <div style={styles.center}>\n            <Button\n              onClick={this.addNewCoordinate}\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n            >\n              Add new coordinate\n            </Button>\n          </div>\n\n          <div>\n            {this.state.data.map((coord, i) => (\n              <InputCoordinate\n                key={i}\n                coordinate={coord}\n                onChange={this.onDataChange(i)}\n                onDelete={this.onDataDelete(i)}\n              />\n            ))}\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.props.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n","/**\n * Returns whether the given value is in range [min, max).\n * That is min <= value < max;\n *\n * @param {number} value  Value to check if it is in range\n * @param {number} min  Range minimum (inclusive)\n * @param {number} max  Range maximum (exclusive)\n */\nexport const isInRange = (value, min, max) => value >= min && value < max;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { isInRange } from \"../../../../../lib/Checks\";\n\nconst styles = {\n  inputsContainer: {\n    flexWrap: \"wrap\",\n    margin: \"1rem\"\n  },\n  input: {\n    margin: \"1rem\"\n  }\n};\n\n/**\n * Dialog to prompt the user for the new brightness and contrast for the new\n * image on the adjust brightness and contrast operation\n */\nexport default class BrightnessAndContrastDialog extends React.Component {\n  static propTypes = {\n    oldBrightness: PropTypes.number.isRequired,\n    oldContrast: PropTypes.number.isRequired,\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired\n  };\n\n  state = {\n    brightness: 0,\n    brightnessErrorMessage: \"\",\n    contrast: 0,\n    contrastErrorMessage: \"\",\n    formChanged: false\n  };\n\n  static getDerivedStateFromProps(props, state) {\n    if ((!state.formChanged) && \n        (props.oldBrightness !== state.oldBrightness ||\n        props.oldContrast !== state.oldContrast)) {\n      return {\n        brightness: props.oldBrightness.toFixed(2),\n        contrast: props.oldContrast.toFixed(2)\n      };\n    }\n    return null;\n  }\n\n  /** General listener for a change on the brightness or contrast input */\n  onChange = (\n    e,\n    valueStateName,\n    errorMessageStateName,\n    minPossibleValue,\n    maxPossibleValue\n  ) => {\n    const value = Number.parseFloat(e.target.value);\n\n    if (!isInRange(value, minPossibleValue, maxPossibleValue + 1)) {\n      this.setState({\n        [valueStateName]: e.target.value,\n        [errorMessageStateName]: `Required a number between ${minPossibleValue} and ${maxPossibleValue}`,\n        formChanged: true\n      });\n    } else {\n      this.setState({\n        [valueStateName]: value,\n        [errorMessageStateName]: \"\",\n        formChanged: true\n      });\n    }\n  };\n\n  /** Listener for when the user changes the brightness input value */\n  onBrightnessChange = e =>\n    this.onChange(e, \"brightness\", \"brightnessErrorMessage\", 0, 255);\n\n  /** Listener for when the user changes the contrast input value */\n  onContrastChange = e =>\n    this.onChange(e, \"contrast\", \"contrastErrorMessage\", 0, 128);\n\n  onSubmit = () => {\n    // TODO: if there is an error: show error message and don't submit\n    this.props.onSubmit(this.state.brightness, this.state.contrast);\n    this.setState({\n      formChanged: false\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      formChanged: false\n    });\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          Brightness and Contrast Ajustment\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, enter the brightness and contrast for the new image\n          </DialogContentText>\n          <div className=\"center\" style={styles.inputsContainer}>\n            <TextField\n              error={!!this.state.brightnessErrorMessage}\n              label={this.state.brightnessErrorMessage}\n              type=\"number\"\n              placeholder={String(this.props.oldBrightness.toFixed(2))}\n              value={this.state.brightness}\n              onChange={this.onBrightnessChange}\n              margin=\"dense\"\n              style={styles.input}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">Brightness: </InputAdornment>\n                )\n              }}\n            />\n            <TextField\n              error={!!this.state.contrastErrorMessage}\n              label={this.state.contrastErrorMessage}\n              type=\"number\"\n              placeholder={String(this.props.oldContrast.toFixed(2))}\n              value={this.state.contrast}\n              onChange={this.onContrastChange}\n              margin=\"dense\"\n              style={styles.input}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">Contrast: </InputAdornment>\n                )\n              }}\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { isInRange } from \"../../../../../lib/Checks\";\n\nconst styles = {\n  inputsContainer: {\n    flexWrap: \"wrap\",\n    margin: \"1rem\"\n  },\n  input: {\n    margin: \"1rem\"\n  }\n};\n\n/**\n * Dialog to prompt the user for the gamma value for the new\n * image on the gamma correction operation\n */\nexport default class GammaCorrectionDialog extends React.Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired\n  };\n\n  state = {\n    gamma: 0,\n    gammaErrorMessage: \"\",\n  };\n\n  /** General listener for a change on the gamma input */\n  onChange = (e, valueStateName, errorMessageStateName, errorMessage) => {\n    const value = Number.parseFloat(e.target.value);\n\n    if (!isInRange(value, 0, Number.POSITIVE_INFINITY)) {\n      this.setState({\n        [valueStateName]: e.target.value,\n        [errorMessageStateName]: errorMessage\n      });\n    } else {\n      this.setState({\n        [valueStateName]: value,\n        [errorMessageStateName]: \"\"\n      });\n    }\n  };\n\n  /** Listener for when the user changes the gamma input value */\n  onGammaChange = e =>\n    this.onChange(\n      e,\n      \"gamma\",\n      \"gammaErrorMessage\",\n      \"Required a value equal or greater than 0\"\n    );\n\n  onSubmit = () =>\n    // TODO: if there is an error: show error message and don't submit\n    this.props.onSubmit(this.state.gamma);\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          Gamma correction\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, enter the gamma value for the new image\n          </DialogContentText>\n          <div className=\"center\" style={styles.inputsContainer}>\n            <TextField\n              error={!!this.state.gammaErrorMessage}\n              label={this.state.gammaErrorMessage}\n              type=\"number\"\n              placeholder=\"0\"\n              value={this.state.gamma}\n              onChange={this.onGammaChange}\n              margin=\"dense\"\n              style={styles.input}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">Gamma: </InputAdornment>\n                )\n              }}\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.props.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\n\nconst styles = theme => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass FilesListMenu extends React.Component {\n  state = {\n    anchorEl: null,\n    selectedIndex: 0,\n  };\n\n  handleClickListItem = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleMenuItemClick = (event, index, selectedItemName) => {\n    this.setState({ selectedIndex: index, anchorEl: null });\n    event[\"selectedItemName\"] = selectedItemName;\n    this.props.onItemSelection(event);\n  };\n\n  handleClose = () => {\n    this.setState({ anchorEl: null });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { anchorEl } = this.state;\n\n    return (\n      <div className={classes.root}>\n        <List component=\"nav\">\n          <ListItem\n            disabled={this.props.isDisabled}\n            button\n            aria-haspopup=\"true\"\n            aria-label={this.props.menuTitle}\n            onClick={this.handleClickListItem}\n          >\n            <ListItemText\n              primary={this.props.menuTitle}\n              secondary={\n                (this.props.options.length > 0) ?\n                this.props.options[this.state.selectedIndex] :\n                \"None\"\n              }\n            />\n          </ListItem>\n        </List>\n        { (this.props.options.length > 0) ?\n          <Menu\n            anchorEl={anchorEl}\n            open={Boolean(anchorEl)}\n            onClose={this.handleClose}\n          >\n            {this.props.options.map((option, index) => (\n              <MenuItem\n                key={option}\n                selected={index === this.state.selectedIndex}\n                onClick={event => this.handleMenuItemClick(event, index, option)}\n              >\n                {option}\n              </MenuItem>\n            ))}\n          </Menu> :\n          null\n        }\n        \n      </div>\n    );\n  }\n}\n\nFilesListMenu.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(FilesListMenu);","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport FilesListMenu from \"../../../FilesListMenu\";\n\n/**\n * Dialog to prompt the user for the image name of the image to do the\n * difference operation\n */\nexport default class ImageDifferenceDialog extends React.Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired\n  };\n\n  state = {\n    imgName: \"\"\n  };\n\n  onChange = e =>\n    this.setState({\n      imgName: e.selectedItemName\n    });\n\n  onSubmit = () =>\n    this.props.onSubmit(this.state.imgName);\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Image Difference</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, select the image to perform the difference \n            to the current image\n          </DialogContentText>\n          <div className=\"center\">\n            <FilesListMenu\n              menuTitle=\"Selected image\"\n              options={this.props.activeImagesNames}\n              onItemSelection={this.onChange}\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.props.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport FilesListMenu from \"../../../FilesListMenu\";\n\n/**\n * Dialog to prompt the user for the image name of the image to do the\n * histogram specification\n */\nexport default class HistogramSpecificationDialog extends React.Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired\n  };\n\n  state = {\n    imgName: \"\"\n  };\n\n  onChange = e =>\n    this.setState({\n      imgName: e.selectedItemName\n    });\n\n  onSubmit = () =>\n    this.props.onSubmit(this.state.imgName);\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Histogram Specificacion</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, select the image with the histogram to perform the\n            histogram specification to the current image\n          </DialogContentText>\n          <div className=\"center\">\n            <FilesListMenu\n              menuTitle=\"Selected image\"\n              options={this.props.activeImagesNames}\n              onItemSelection={this.onChange}\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.props.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { ChromePicker } from \"react-color\";\nimport FilesListMenu from \"../../../FilesListMenu\";\n\n/**\n * Dialog to prompt the user for the image name of the image to do the\n * changes detection, color and threshold\n */\nexport default class ChangesDetectionDialog extends React.Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired\n  };\n\n  state = {\n    imgName: \"\",\n    rgbaColor: { r: 255, g: 0, b: 0 },\n    threshold: \"\"\n  };\n\n  onImgNameChange = e =>\n    this.setState({\n      imgName: e.selectedItemName\n    });\n\n  onThresholdChange = e => {\n    const newValue = Number.parseFloat(e.target.value);\n\n    this.setState({\n      threshold: Number.isFinite(newValue) ? newValue : \"\"\n    });\n  };\n\n  handleChangeComplete = color => this.setState({ rgbaColor: color.rgb });\n\n  onSubmit = () => {\n    const { imgName, rgbaColor, threshold } = this.state;\n    this.props.onSubmit({\n      imgName,\n      rgbaColor,\n      threshold: threshold === \"\" ? 0 : threshold\n    });\n  };\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Changes Detection</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, select the image to detect the\n            changes between them. Also enter the color which will be used to\n            highlight the differences and the difference threshold, value that\n            will determine what is considered a difference and what not\n          </DialogContentText>\n          <div className=\"center\" style={{ justifyContent: \"space-around\" }}>\n            <FilesListMenu\n              menuTitle=\"Selected image\"\n              options={this.props.activeImagesNames}\n              onItemSelection={this.onImgNameChange}\n            />\n            <TextField\n              placeholder=\"0\"\n              type=\"number\"\n              value={this.state.threshold}\n              onChange={this.onThresholdChange}\n              margin=\"dense\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">Threshold: </InputAdornment>\n                )\n              }}\n            />\n          </div>\n          <div className=\"center\" style={{ marginTop: \"1rem\" }}>\n            <ChromePicker\n              color={this.state.rgbaColor}\n              onChangeComplete={this.handleChangeComplete}\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.props.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport LinearTransformationDialog from \"./Dialogs/LinearTransformationDialog\";\nimport BrightnessAndContrastDialog from \"./Dialogs/BrightnessAndContrastDialog\";\nimport GammaCorrectionDialog from \"./Dialogs/gammaCorrectionDialog\";\nimport ImageDifferenceDialog from \"./Dialogs/ImageDifferenceDialog\";\nimport HistogramSpecificationDialog from \"./Dialogs/HistogramSpecificationDialog\";\nimport ChangesDetectionDialog from \"./Dialogs/ChangesDetectionDialog\";\n\n/**\n * \"Point Operations\" Appbar Dropdown menu. Contains all the point operations\n * options that the user can choose\n */\nexport default class PointOperationsSubmenu extends React.Component {\n  static propTypes = {\n    selectedImageInfo: PropTypes.object.isRequired,\n    onGrayscale: PropTypes.func.isRequired,\n    histogramEqualization: PropTypes.func.isRequired,\n    linearTransformation: PropTypes.func.isRequired,\n    brightnessAndContrastAdjustment: PropTypes.func.isRequired,\n    gammaCorrection: PropTypes.func.isRequired,\n    imagesDifference: PropTypes.func.isRequired,\n    histogramSpecification: PropTypes.func.isRequired,\n    changesDetection: PropTypes.func.isRequired\n  };\n\n  state = {\n    open: false,\n    isLinearTransformDialogOpen: false,\n    isLightnessAndContrastDialogOpen: false,\n    isGammaCorrectionDialogOpen: false,\n    isImageDifferenceDialogOpen: false,\n    isHistogramSpecificationDialogOpen: false,\n    isChangesDetectionDialogOpen: false\n  };\n\n  handleDialogOpen = dialogStateName => () =>\n    this.setState({ open: false, [dialogStateName]: true });\n\n  handleDialogClose = dialogStateName => () =>\n    this.setState({ [dialogStateName]: false });\n\n  handleToggle = () => {\n    this.setState(state => ({ open: !state.open }));\n  };\n\n  handleClose = event => {\n    if (this.anchorEl.contains(event.target)) {\n      return;\n    }\n\n    this.setState({ open: false });\n  };\n\n  render() {\n    return (\n      <div>\n        <Button\n          buttonRef={node => {\n            this.anchorEl = node;\n          }}\n          aria-owns={this.state.open ? \"file-menu-list-grow\" : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.handleToggle}\n          color=\"inherit\"\n        >\n          Point Operations\n        </Button>\n        <Popper\n          open={this.state.open}\n          anchorEl={this.anchorEl}\n          transition\n          disablePortal\n        >\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              id=\"file-menu-list-grow\"\n              style={{\n                transformOrigin:\n                  placement === \"bottom\" ? \"center top\" : \"center bottom\"\n              }}\n            >\n              <Paper onClick={this.handleClose}>\n                <ClickAwayListener onClickAway={this.handleClose}>\n                  <MenuList>\n                    <MenuItem onClick={this.props.onGrayscale}>\n                      To Grayscale\n                    </MenuItem>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isLinearTransformDialogOpen\"\n                      )}\n                    >\n                      Linear Transformation\n                    </MenuItem>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isLightnessAndContrastDialogOpen\"\n                      )}\n                    >\n                      Brightness and Contrast Adjustment\n                    </MenuItem>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isGammaCorrectionDialogOpen\"\n                      )}\n                    >\n                      Gamma Correction\n                    </MenuItem>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isImageDifferenceDialogOpen\"\n                      )}\n                    >\n                      Images Difference\n                    </MenuItem>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isChangesDetectionDialogOpen\"\n                      )}\n                    >\n                      Changes Detection\n                    </MenuItem>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isHistogramSpecificationDialogOpen\"\n                      )}\n                    >\n                      Histogram Specification\n                    </MenuItem>\n                    <MenuItem onClick={this.props.histogramEqualization}>\n                      Histogram Equalization\n                    </MenuItem>\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n        <LinearTransformationDialog\n          isOpen={this.state.isLinearTransformDialogOpen}\n          onClose={this.handleDialogClose(\"isLinearTransformDialogOpen\")}\n          onSubmit={coordinates => {\n            this.handleDialogClose(\"isLinearTransformDialogOpen\")();\n            this.props.linearTransformation(coordinates);\n          }}\n        />\n        <BrightnessAndContrastDialog\n          oldBrightness={this.props.selectedImageInfo.brightness}\n          oldContrast={this.props.selectedImageInfo.contrast}\n          isOpen={this.state.isLightnessAndContrastDialogOpen}\n          onClose={this.handleDialogClose(\"isLightnessAndContrastDialogOpen\")}\n          onSubmit={(brightness, contrast) => {\n            this.handleDialogClose(\"isLightnessAndContrastDialogOpen\")();\n            this.props.brightnessAndContrastAdjustment(brightness, contrast);\n          }}\n        />\n        <GammaCorrectionDialog\n          isOpen={this.state.isGammaCorrectionDialogOpen}\n          onClose={this.handleDialogClose(\"isGammaCorrectionDialogOpen\")}\n          onSubmit={gammaValue => {\n            this.handleDialogClose(\"isGammaCorrectionDialogOpen\")();\n            this.props.gammaCorrection(gammaValue);\n          }}\n        />\n        <ImageDifferenceDialog\n          activeImagesNames={this.props.activeImagesNames}\n          isOpen={this.state.isImageDifferenceDialogOpen}\n          onClose={this.handleDialogClose(\"isImageDifferenceDialogOpen\")}\n          onSubmit={imgName => {\n            this.handleDialogClose(\"isImageDifferenceDialogOpen\")();\n            this.props.imagesDifference(imgName);\n          }}\n        />\n        <HistogramSpecificationDialog\n          activeImagesNames={this.props.activeImagesNames}\n          isOpen={this.state.isHistogramSpecificationDialogOpen}\n          onClose={this.handleDialogClose(\"isHistogramSpecificationDialogOpen\")}\n          onSubmit={imgName => {\n            this.handleDialogClose(\"isHistogramSpecificationDialogOpen\")();\n            this.props.histogramSpecification(imgName);\n          }}\n        />\n        <ChangesDetectionDialog\n          activeImagesNames={this.props.activeImagesNames}\n          isOpen={this.state.isChangesDetectionDialogOpen}\n          onClose={this.handleDialogClose(\"isChangesDetectionDialogOpen\")}\n          onSubmit={userInput => {\n            this.handleDialogClose(\"isChangesDetectionDialogOpen\")();\n            this.props.changesDetection(userInput);\n          }}\n        />\n      </div>\n    );\n  }\n}","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport FilesListMenu from \"../../../FilesListMenu\";\n\nconst styles = {\n  inputsContainer: {\n    flexWrap: \"wrap\"\n  },\n  input: {\n    margin: \"1rem\"\n  },\n  center: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    marginTop: \"1rem\",\n    marginBottom: \"1rem\"\n  }\n};\n\n/**\n * Dialog to prompt the user for the degrees, interpolation method\n * and \"rotate and print\" flag for the rotation operation.\n */\nexport default class ImageRotationDialog extends React.Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    interpolationMethods: PropTypes.array.isRequired\n  };\n\n  state = {\n    degrees: 0,\n    degreesErrorMessage: \"\",\n    rotateAndPaint: false,\n    interpolationMethod: this.props.interpolationMethods[0]\n  };\n\n  /** Listener for when the user changes the degrees input value */\n  onDegreesChange = e => {\n    if (!Number.parseFloat(e.target.value)) {\n      this.setState({\n        degrees: e.target.value,\n        degreesErrorMessage: \"Enter an amount of degrees\"\n      });\n    } else {\n      this.setState({\n        degrees: Number.parseFloat(e.target.value),\n        degreesErrorMessage: \"\"\n      });\n    }\n  }\n  \n  /** Listener for when the user changes the rotate and paint*/\n  onRotateAndPaintChange = e => {\n    this.setState({\n      rotateAndPaint: e.target.checked\n    });\n  }\n\n  /** Listener for when the user changes the interpolation method */\n  onInterpolationMethodChange = e =>\n    this.setState({\n      interpolationMethod: e.selectedItemName\n    });\n\n  onSubmit = () => {\n    const { degrees, rotateAndPaint, interpolationMethod } = this.state;\n    this.props.onSubmit({\n      degrees,\n      rotateAndPaint,\n      interpolationMethod\n    });\n  };\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          Image rotation\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, enter the rotation parameters\n          </DialogContentText>\n          <div className=\"center\" style={styles.inputsContainer}>\n            <div style={styles.center}>\n              <TextField\n                error={!!this.state.degreesErrorMessage}\n                label={this.state.degreesErrorMessage}\n                type=\"number\"\n                placeholder=\"0\"\n                value={this.state.degrees}\n                onChange={this.onDegreesChange}\n                margin=\"dense\"\n                style={styles.input}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">Degrees: </InputAdornment>\n                  )\n                }}\n              />\n            </div>\n            <FilesListMenu\n              menuTitle=\"Interpolation method\"\n              options={this.props.interpolationMethods}\n              onItemSelection={this.onInterpolationMethodChange}\n              isDisabled={this.state.rotateAndPaint}\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={this.state.rotateAndPaint}\n                  onChange={this.onRotateAndPaintChange}\n                  value=\"rotateAndPaint\"\n                  color=\"primary\"\n                />\n              }\n              label=\"Rotate and paint\"\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.props.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport FilesListMenu from \"../../../FilesListMenu\";\n\nconst styles = {\n  inputsContainer: {\n    flexWrap: \"wrap\"\n  },\n  input: {\n    margin: \"1rem\"\n  },\n  center: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    marginTop: \"0.4rem\",\n    marginBottom: \"0.4rem\",\n  }\n};\n\n/**\n * Dialog to prompt the user for the new dimensions and\n * interpolation method for the resizing operation.\n */\nexport default class ImageResizingDialog extends React.Component {\n  static propTypes = {\n    oldWidth: PropTypes.number.isRequired,\n    oldHeight: PropTypes.number.isRequired,\n    isOpen: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    interpolationMethods: PropTypes.array.isRequired\n  };\n\n  state = {\n    width: this.props.oldWidth,\n    widthPercentage: 0,\n    widthErrorMessage: \"Select an image\",\n    height: this.props.oldHeight,\n    heightPercentage: 0,\n    heightErrorMessage: \"Select an image\",\n    interpolationMethod: this.props.interpolationMethods[0],\n    formChanged: false\n  };\n\n  static getDerivedStateFromProps(props, state) {\n    if ((!state.formChanged) && \n        (props.oldHeight !== state.height ||\n        props.oldWidth !== state.width)) {\n      return {\n        height: props.oldHeight,\n        width: props.oldWidth,\n        widthPercentage: 100,\n        heightPercentage: 100,\n        widthErrorMessage: (props.oldWidth <= 0) ?\n          \"Width must be greater than 0\" : \"\",\n        heightErrorMessage: (props.oldHeight <= 0) ?\n          \"Height must be greater than 0\" : \"\"\n      };\n    }\n\n    if (props.oldHeight === 0 && props.oldWidth === 0) {\n      return {\n        widthErrorMessage: \"Select an image\",\n        heightErrorMessage: \"Select an image\"\n      };\n    }\n    return null;\n  }\n\n  /** General listener for when the user changes dimension inputs */\n  onDimensionsChange = (\n    e,\n    dimensionName,\n    dimensionStateName,\n    oldDimensionPropName,\n    percentageStateName,\n    errorMessageStateName,\n    isPercentage\n  ) => {\n\n    const value = Number.parseFloat(e.target.value);\n    let dimension;\n    let percentage;\n    if (!isPercentage) {\n      dimension = Math.round(value);\n      percentage = ((dimension * 100) / this.props[oldDimensionPropName]);\n    } else {\n      dimension = Math.floor((value / 100) * this.props[oldDimensionPropName]);\n      percentage = value;\n    }\n    if (dimension < 1 || Number.isNaN(value)) {\n      this.setState({\n        [dimensionStateName]: (isPercentage) ? \n          \"\" : e.target.value,\n        [percentageStateName]: (isPercentage) ?\n          e.target.value : \"\",\n        [errorMessageStateName]: dimensionName + \" must be greater than 0\",\n        formChanged: true\n      });\n    } else {\n      this.setState({\n        [dimensionStateName]: (isPercentage) ? \n          dimension : value,\n        [percentageStateName]: (isPercentage) ?\n          value : percentage,\n        [errorMessageStateName]: \"\",\n        formChanged: true\n      });\n    }\n  };\n\n  /** Listener for when the user changes width input */\n  onWidthChange = e =>\n    this.onDimensionsChange(\n      e, \n      \"Width\", \n      \"width\", \n      \"oldWidth\", \n      \"widthPercentage\", \n      \"widthErrorMessage\", \n      false\n    );\n\n  /** Listener for when the user changes height input */\n  onHeightChange = e => \n    this.onDimensionsChange(\n      e, \n      \"Height\", \n      \"height\", \n      \"oldHeight\", \n      \"heightPercentage\", \n      \"heightErrorMessage\", \n      false\n    );\n  \n  /** Listener for when the user changes width percentage input */\n  onWidthPercentageChange = e => \n    this.onDimensionsChange(\n      e, \n      \"Width\", \n      \"width\", \n      \"oldWidth\", \n      \"widthPercentage\", \n      \"widthErrorMessage\", \n      true\n    );\n\n  /** Listener for when the user changes height percentage input */\n  onHeightPercentageChange = e => \n    this.onDimensionsChange(\n      e, \n      \"Height\", \n      \"height\", \n      \"oldHeight\", \n      \"heightPercentage\", \n      \"heightErrorMessage\", \n      true\n    );\n\n  /** Listener for when the user changes the interpolation method */\n  onInterpolationMethodChange = e =>\n    this.setState({\n      interpolationMethod: e.selectedItemName\n    });\n\n  onSubmit = () => {\n    //TODO: Check resizing parameters\n    this.setState({\n      formChanged: false\n    });\n    const { widthPercentage, heightPercentage, interpolationMethod } = this.state;\n    this.props.onSubmit({\n      widthPercentage,\n      heightPercentage,\n      interpolationMethod\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      formChanged: false\n    });\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <Dialog\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n        scroll=\"body\"\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          Image resizing\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please, enter the resizing parameters\n          </DialogContentText>\n            <div style={styles.center}>\n              <TextField\n                error={!!this.state.widthErrorMessage}\n                label={this.state.widthErrorMessage}\n                type=\"number\"\n                placeholder={String(this.props.oldWidth)}\n                value={this.state.width}\n                onChange={this.onWidthChange}\n                margin=\"dense\"\n                style={styles.input}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">Width: </InputAdornment>\n                  ),\n                  endAdornment: (\n                    <InputAdornment position=\"end\">px </InputAdornment>\n                  )\n                }}\n              />\n              <TextField\n                error={!!this.state.heightErrorMessage}\n                label={this.state.heightErrorMessage}\n                type=\"number\"\n                placeholder={String(this.props.oldHeight)}\n                value={this.state.height}\n                onChange={this.onHeightChange}\n                margin=\"dense\"\n                style={styles.input}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">Height: </InputAdornment>\n                  ),\n                  endAdornment: (\n                    <InputAdornment position=\"end\">px </InputAdornment>\n                  )\n                }}\n              />\n            </div>\n            <div className=\"center\" style={styles.inputsContainer}>\n            <div style={styles.center}>\n              <TextField\n                error={!!this.state.widthErrorMessage}\n                label={this.state.widthErrorMessage}\n                type=\"number\"\n                placeholder=\"100\"\n                value={this.state.widthPercentage}\n                onChange={this.onWidthPercentageChange}\n                margin=\"dense\"\n                style={styles.input}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">Percentage: </InputAdornment>\n                  ),\n                  endAdornment: (\n                    <InputAdornment position=\"end\">% </InputAdornment>\n                  )\n                }}\n              />\n              <TextField\n                error={!!this.state.heightErrorMessage}\n                label={this.state.heightErrorMessage}\n                type=\"number\"\n                placeholder=\"100\"\n                value={this.state.heightPercentage}\n                onChange={this.onHeightPercentageChange}\n                margin=\"dense\"\n                style={styles.input}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">Percentage: </InputAdornment>\n                  ),\n                  endAdornment: (\n                    <InputAdornment position=\"end\">% </InputAdornment>\n                  )\n                }}\n              />\n            </div>\n            <FilesListMenu\n              menuTitle=\"Interpolation method\"\n              options={this.props.interpolationMethods}\n              onItemSelection={this.onInterpolationMethodChange}\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.onSubmit} color=\"primary\">\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n};","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport ImageRotationDialog from \"./Dialogs/ImageRotationDialog\";\nimport ImageResizingDialog from \"./Dialogs/ImageResizingDialog\";\n\n/**\n * \"Geometric Operations\" Appbar Dropdown menu. Contains all the geometric operations\n * options that the user can choose\n */\nexport default class GeometricOperationsSubmenu extends React.Component {\n  static propTypes = {\n    selectedImageInfo: PropTypes.object.isRequired,\n    interpolationMethods: PropTypes.array.isRequired,\n    imageRotation: PropTypes.func.isRequired,\n    imageResizing: PropTypes.func.isRequired,\n    verticalMirror: PropTypes.func.isRequired,\n    horizontalMirror: PropTypes.func.isRequired,\n    imageTranspose: PropTypes.func.isRequired\n  };\n\n  state = {\n    open: false,\n    isImageRotationDialogOpen: false,\n    isImageResizingDialogOpen: false\n  };\n\n  handleDialogOpen = dialogStateName => () =>\n    this.setState({ open: false, [dialogStateName]: true });\n\n  handleDialogClose = dialogStateName => () =>\n    this.setState({ [dialogStateName]: false });\n\n  handleToggle = () => {\n    this.setState(state => ({ open: !state.open }));\n  };\n\n  handleClose = event => {\n    if (this.anchorEl.contains(event.target)) {\n      return;\n    }\n    this.setState({ open: false });\n  };\n\n  render() {\n    return (\n      <div>\n        <Button\n          buttonRef={node => {\n            this.anchorEl = node;\n          }}\n          aria-owns={this.state.open ? \"file-menu-list-grow\" : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.handleToggle}\n          color=\"inherit\"\n        >\n          Geometric Operations\n        </Button>\n        <Popper\n          open={this.state.open}\n          anchorEl={this.anchorEl}\n          transition\n          disablePortal\n        >\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              id=\"file-menu-list-grow\"\n              style={{\n                transformOrigin:\n                  placement === \"bottom\" ? \"center top\" : \"center bottom\"\n              }}\n            >\n              <Paper onClick={this.handleClose}>\n                <ClickAwayListener onClickAway={this.handleClose}>\n                  <MenuList>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isImageRotationDialogOpen\"\n                      )}\n                    >\n                      Image rotation\n                    </MenuItem>\n                    <MenuItem\n                      onClick={this.handleDialogOpen(\n                        \"isImageResizingDialogOpen\"\n                      )}\n                    >\n                      Image resizing\n                    </MenuItem>\n                    <MenuItem onClick={this.props.verticalMirror}>\n                      Vertical mirror\n                    </MenuItem>\n                    <MenuItem onClick={this.props.horizontalMirror}>\n                      Horizontal mirror\n                    </MenuItem>\n                    <MenuItem onClick={this.props.imageTranspose}>\n                      Image Transpose\n                    </MenuItem>\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n        <ImageRotationDialog\n          isOpen={this.state.isImageRotationDialogOpen}\n          onClose={this.handleDialogClose(\"isImageRotationDialogOpen\")}\n          onSubmit={(degrees, rotateAndPaint, interpolationMethod) => {\n            this.handleDialogClose(\"isImageRotationDialogOpen\")();\n            this.props.imageRotation(degrees, rotateAndPaint, interpolationMethod);\n          }}\n          interpolationMethods={this.props.interpolationMethods}\n        />\n        <ImageResizingDialog\n          oldWidth={this.props.selectedImageInfo.width}\n          oldHeight={this.props.selectedImageInfo.height}\n          isOpen={this.state.isImageResizingDialogOpen}\n          onClose={this.handleDialogClose(\"isImageResizingDialogOpen\")}\n          onSubmit={(widthPercentage, heightPercentage, interpolationMethod) => {\n            this.handleDialogClose(\"isImageResizingDialogOpen\")();\n            this.props.imageResizing(widthPercentage, heightPercentage, interpolationMethod);\n          }}\n          interpolationMethods={this.props.interpolationMethods}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport FileSubmenu from \"./Submenus/FileSubmenu\";\nimport ImageSubmenu from \"./Submenus/ImageSubmenu\";\nimport PointOperationsSubmenu from \"./Submenus/PointOperationsSubmenu\";\nimport GeometricOperationsSubmenu from \"./Submenus/GeometricOperationsSubmenu\";\n\nconst AppToolbar = props => (\n  <AppBar position=\"static\">\n    <Toolbar>\n      <FileSubmenu\n        onFileInput={props.onFileInput}\n        onDownload={props.onDownload}\n      />\n      <ImageSubmenu\n        onShowHistogram={props.onShowHistogram}\n        onCrop={props.onCrop}\n      />\n      <PointOperationsSubmenu\n        selectedImageInfo={props.selectedImageInfo}\n        activeImagesNames={props.activeImagesNames}\n        onGrayscale={props.onGrayscale}\n        histogramEqualization={props.histogramEqualization}\n        linearTransformation={props.linearTransformation}\n        brightnessAndContrastAdjustment={props.brightnessAndContrastAdjustment}\n        gammaCorrection={props.gammaCorrection}\n        imagesDifference={props.imagesDifference}\n        histogramSpecification={props.histogramSpecification}\n        changesDetection={props.changesDetection}\n      />\n      <GeometricOperationsSubmenu\n        selectedImageInfo={props.selectedImageInfo}\n        interpolationMethods={props.interpolationMethods}\n        imageRotation={props.imageRotation}\n        imageResizing={props.imageResizing}\n        verticalMirror={props.verticalMirror}\n        horizontalMirror={props.horizontalMirror}\n        imageTranspose={props.imageTranspose}\n      />\n    </Toolbar>\n  </AppBar>\n);\n\nAppToolbar.propTypes = {\n  onFileInput: PropTypes.func.isRequired,\n  onDownload: PropTypes.func.isRequired,\n  onShowHistogram: PropTypes.func.isRequired,\n  onCrop: PropTypes.func.isRequired,\n  onGrayscale: PropTypes.func.isRequired,\n  histogramEqualization: PropTypes.func.isRequired,\n  linearTransformation: PropTypes.func.isRequired,\n  brightnessAndContrastAdjustment: PropTypes.func.isRequired,\n  gammaCorrection: PropTypes.func.isRequired,\n  imagesDifference: PropTypes.func.isRequired,\n  histogramSpecification: PropTypes.func.isRequired,\n  changesDetection: PropTypes.func.isRequired,\n  interpolationMethods: PropTypes.array.isRequired,\n  imageRotation: PropTypes.func.isRequired,\n  activeImagesNames: PropTypes.array.isRequired,\n  selectedImageInfo: PropTypes.object.isRequired,\n  imageResizing: PropTypes.func.isRequired,\n  verticalMirror: PropTypes.func.isRequired,\n  horizontalMirror: PropTypes.func.isRequired,\n  imageTranspose: PropTypes.func.isRequired\n};\n\nexport default AppToolbar;\n\n//                 <a className=\"navbar-item\" href=\"https://github.com/carlosdg/ImageProcessor.git\">\n//                     <img alt=\"logo\" src=\"https://i.imgur.com/DckFstm.png\" height=\"50\"/>\n//                 </a>\n","import RgbaImageBuffer from \"../lib/RgbaImageBuffer\";\n\n/**\n * Class to represent an image histogram. Each image has associated histograms\n * which describes the way that its pixels values are distributed.\n *\n * An object of this class wraps the values of the histogram besides some useful\n * information.\n */\nexport default class Histogram {\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {RgbaImageBuffer} imagePixels Image Buffer to create the histogram\n   * for\n   */\n  constructor(imagePixels) {\n    this.setImagePixels(imagePixels.pixels);\n  }\n\n  /**\n   * Sets the pixels values of the associated image and extracts histogram\n   * values and useful information.\n   */\n  setImagePixels(imagePixels) {\n    this.histogramValues = new Array(256).fill(0);\n    for (let i = 0; i < imagePixels.length; i += RgbaImageBuffer.NUM_CHANNELS) {\n      if (imagePixels[i + 3] === 0) {\n        // The transparent pixels are ignored\n        continue;\n      }\n      this.histogramValues[imagePixels[i]]++;\n    }\n\n    this.histogramInfo = {};\n    this.histogramInfo.count = this.histogramValues.reduce(\n      (previousValue, currentElement) => previousValue + currentElement,\n      0\n    );\n\n    this.histogramInfo.mean =\n      this.histogramValues.reduce(\n        (previousValue, currentElement, index) =>\n          previousValue + currentElement * index,\n        0\n      ) / this.histogramInfo.count;\n\n    this.histogramInfo.stdDev = Math.sqrt(\n      this.histogramValues.reduce(\n        (previousValue, currentElement, index) =>\n          previousValue +\n          Math.pow(index - this.histogramInfo.mean, 2) * currentElement,\n        0\n      ) / this.histogramInfo.count\n    );\n\n    for (let i = 0; i < this.histogramValues.length; ++i) {\n      if (this.histogramValues[i] !== 0) {\n        this.histogramInfo.minValue = i;\n        break;\n      }\n    }\n\n    for (let i = this.histogramValues.length - 1; i >= 0; --i) {\n      if (this.histogramValues[i] !== 0) {\n        this.histogramInfo.maxValue = i;\n        break;\n      }\n    }\n\n    let maxIndex = 0;\n    let maxCount = 0;\n    this.histogramValues.forEach((count, value) => {\n      if (count > maxCount) {\n        maxCount = count;\n        maxIndex = value;\n      }\n    });\n\n    this.histogramInfo.mode = {};\n    this.histogramInfo.mode.value = maxIndex;\n    this.histogramInfo.mode.count = maxCount;\n\n    let entropy = 0;\n    let probability;\n    for (let i = 0; i < 256; ++i) {\n      probability = this.histogramValues[i] / this.histogramInfo.count;\n      if (probability > 0) {\n        entropy += probability * Math.log2(probability);\n      }\n    }\n    if (entropy !== 0)\n      entropy *= -1;\n\n    this.histogramInfo.entropy = entropy.toFixed(3);\n  }\n}\n","import RgbaImageBuffer from \"../RgbaImageBuffer\";\n\n/**\n * Returns the given pixels converted to grayscale, according to the given\n * grayscale strategy\n *\n * @param {RgbaImageBuffer} imgBuffer Image Buffer base to create the grayscale\n * image from\n * @param {Function} grayscaleStrategy Method used to convert to grayscale.\n * Defaults to Phase Alternating Line\n * @returns {RgbaImageBuffer} Image buffer in grayscale\n */\nexport const imageToGrayscale = (\n  imgBuffer,\n  grayscaleStrategy = pixelToGrayscalePal\n) => {\n  const result = imgBuffer.copy();\n\n  for (let i = 0; i < result.pixels.length; i += RgbaImageBuffer.NUM_CHANNELS) {\n    const rComponent = imgBuffer.pixels[i];\n    const gComponent = imgBuffer.pixels[i + 1];\n    const bComponent = imgBuffer.pixels[i + 2];\n    const grayValue = grayscaleStrategy(rComponent, gComponent, bComponent);\n\n    result.pixels[i] = grayValue;\n    result.pixels[i + 1] = grayValue;\n    result.pixels[i + 2] = grayValue;\n  }\n\n  return result;\n};\n\n/** Returns the given pixel to grayscale according to Phase Alternating Line */\nexport const pixelToGrayscalePal = (rComponent, gComponent, bComponent) =>\n  Math.round(rComponent * 0.222 + gComponent * 0.707 + bComponent * 0.071);\n","import RgbaImageBuffer from \"../RgbaImageBuffer\";\n\n/**\n * Transforms an image according to the given lookup table.\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @param {Array} lookupTable Lookup table\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const transformImage = (imgBuffer, lookupTable) => {\n  let result = imgBuffer.copy();\n  for (let i = 0; i < result.pixels.length; i += RgbaImageBuffer.NUM_CHANNELS) {\n    let newValue = lookupTable[result.pixels[i]];\n    result.pixels[i] = newValue;\n    result.pixels[i + 1] = newValue;\n    result.pixels[i + 2] = newValue;\n  }\n\n  return result;\n};","/**\n * Class to represent image load errors\n */\nexport default class ImageLoadException extends Error {\n  /**\n   * Creates an instance of this class\n   *\n   * @param {string} errorImageSrc Source of the image that caused the error\n   */\n  constructor(errorImageSrc) {\n    super(`Error loading image with src = ${errorImageSrc}`);\n    this.name = \"ImageLoadException\";\n    this.src = errorImageSrc;\n  }\n}\n","/**\n * Exception class representing out of bounds exceptions. Used to know that some\n * value is not in a range that was supposed to be\n */\nexport default class ValueOutOfBoundsException extends Error {\n  constructor(valueOutOfBounds, boundMinimum, boundMaximum) {\n    super(\n      `${valueOutOfBounds} must be between ${boundMinimum} and ${boundMaximum}`\n    );\n\n    this.name = \"ValueOutOfBoundsException\";\n    this.valueOutOfBounds = valueOutOfBounds;\n    this.boundMinimum = boundMinimum;\n    this.boundMaximum = boundMaximum;\n  }\n}\n","/**\n * Exception class representing image operations errors.\n */\nexport default class ImageOperationException extends Error {\n  constructor(exceptionName, message) {\n    super(message);\n    this.name = exceptionName;\n  }\n}","import { transformImage } from \"./transformImage\";\nimport {ImageOperationException} from \"../Exceptions\";\n\n/**\n * Transforms the given image according to the linear sections\n * conformed by the given points\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @param {Array} points Contains the points which defines\n * the sections of the linear transformation\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const linearTransformation = (\n  imgBuffer,\n  points\n) => {\n  if (points.length < 2)\n    throw new ImageOperationException(\n      \"LinearTransformationException\",\n      \"Linear transformation needs at least 2 points\"\n    );\n  \n  for (let i = 0; i < points.length - 1; ++i) {\n    if (points[i].x > points[i + 1].x)\n      throw new ImageOperationException(\n        \"LinearTransformationException\",\n        \"Points must be ordered according to the x coordinate value\"\n      );\n    \n    if (points[i].x === points[i + 1].x)\n      throw new ImageOperationException(\n        \"LinearTransformationException\",\n        \"Different points should not have the same x coordinate value\"\n      );\n  }\n  \n  if (points[0].x > 0)\n    throw new ImageOperationException(\n      \"LinearTransformationException\",\n      \"X coordinate value of the first point should be less or equal to 0\"\n    );\n\n  if (points[points.length - 1].x < 255)\n    throw new ImageOperationException(\n      \"LinearTransformationException\",\n      \"X coordinate value of the last point should be greater or equal to 255\"\n    );\n\n  let sections = [];\n  for (let i = 1; i < points.length; ++i) {\n    let newSection = {};\n    newSection[\"slope\"] = (points[i].y - points[i - 1].y) / (points[i].x - points[i - 1].x);\n    newSection[\"yIntercept\"] = points[i].y - newSection.slope * points[i].x;\n    newSection[\"frontier\"] = points[i].x;\n    sections.push(newSection);\n  }\n\n  let lookupTable = [];\n  let currentSectionIndex = 0;\n  for (let i = 0; i < 256; ++i) {\n    if (i > sections[currentSectionIndex].frontier)\n      currentSectionIndex++;\n    \n    let newValue = Math.round(\n      sections[currentSectionIndex].slope * i + sections[currentSectionIndex].yIntercept\n    );\n    lookupTable.push(Math.min(Math.max(newValue, 0), 255));\n  }\n  \n  return transformImage(imgBuffer, lookupTable);\n};","import { transformImage } from \"./transformImage\";\n\n/**\n * Changes the contrast and the brightness of the given image\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @param {Number} oldBrightness Previous brightness of the image\n * @param {Number} oldContrast Previous contrast of the image\n * @param {Number} newBrightness New brightness of the image\n * @param {Number} newContrast New contrast of the image\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const brightnessAndContrastAdjustment = (\n  imgBuffer,\n  oldBrightness,\n  oldContrast,\n  newBrightness,\n  newContrast\n) => {\n  // TODO check parameters\n  const A = newContrast / oldContrast;\n  const B = newBrightness - A * oldBrightness; \n  let lookupTable = [];\n\n  for (let i = 0; i < 256; ++i) {\n    let newValue = Math.round(A * i + B);\n    lookupTable.push(Math.min(Math.max(newValue, 0), 255));\n  }\n\n  return transformImage(imgBuffer, lookupTable);\n}","import { transformImage } from \"./transformImage\";\nimport {ImageOperationException} from \"../Exceptions\";\n\n/**\n * Applies gamma correction to the given image\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @param {Number} gammaValue Gamma value for gamma correction\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const gammaCorrection = (\n  imgBuffer,\n  gammaValue\n) => {\n\n  if (gammaValue < 0)\n    throw new ImageOperationException(\"GammaCorrectionException\", \"Invalid gamma value, gamma should be equal or greater than 0.\");\n  \n  let lookupTable = [];\n  for (let i = 0; i < 256; ++i) {\n    lookupTable[i] = (Math.pow(i / 255, gammaValue)) * 255;\n  }\n\n  return transformImage(imgBuffer, lookupTable);\n}","import RgbaImageBuffer from \"../RgbaImageBuffer\";\nimport {ImageOperationException} from \"../Exceptions\";\n\n/**\n * Calculates the difference (absolute value) between two images\n * \n * @param {RgbaImageBuffer} firstImgBuffer First image\n * @param {RgbaImageBuffer} secondImgBuffer Second image\n * @returns {RgbaImageBuffer} Result image\n */\nexport const imagesDifference = (\n  firstImgBuffer,\n  secondImgBuffer\n) => {\n\n  if (firstImgBuffer.height !== secondImgBuffer.height ||\n      firstImgBuffer.width  !== secondImgBuffer.width)\n      throw new ImageOperationException(\"ImagesDifferenceException\", \"Images should have the same width and height\");\n\n  const result = firstImgBuffer.copy();\n\n  for (let i = 0; i < result.pixels.length; i += RgbaImageBuffer.NUM_CHANNELS) {\n    let newValue = Math.abs(result.pixels[i] - secondImgBuffer.pixels[i]);\n    result.pixels[i] = newValue;\n    result.pixels[i + 1] = newValue;\n    result.pixels[i + 2] = newValue;\n  }\n\n  return result;\n}","import RgbaImageBuffer from \"../RgbaImageBuffer\";\nimport {ImageOperationException} from \"../Exceptions\";\nimport {imagesDifference} from \"./imagesDifference\";\n\n/**\n * Detects and highlights the changes of two images\n * according to the given threshold\n * \n * @param {RgbaImageBuffer} firstImgBuffer First image\n * @param {RgbaImageBuffer} secondImgBuffer Second image\n * @param {Number} threshold Threshold for considering a change as a important change\n * @param {Object} changeHighlightColor Color for highlight pixels considered as a change\n * @returns {RgbaImageBuffer} Changes map\n */\nexport const changesDetection = (\n  firstImgBuffer,\n  secondImgBuffer,\n  threshold,\n  changeHighlightColor\n) => {\n\n  let difference;\n  try {\n    difference = imagesDifference(firstImgBuffer, secondImgBuffer);\n  } catch (error) {\n    if (error.name === \"ImagesDifferenceException\")\n      throw new ImageOperationException(\"ChangesDetectionException\", error.message);\n    else\n      throw error;\n  }\n\n  const result = firstImgBuffer.copy();\n\n  for (let i = 0; i < result.pixels.length; i += RgbaImageBuffer.NUM_CHANNELS) {\n    if (difference.pixels[i] > threshold) {\n      result.pixels[i] = changeHighlightColor.r;\n      result.pixels[i + 1] = changeHighlightColor.g;\n      result.pixels[i + 2] = changeHighlightColor.b;\n    }\n  }\n\n  return result;\n}","import { transformImage } from \"./transformImage\";\n\n/**\n * Applies histogram specification operation to the given image.\n * It expects the image to transform, its cumulative histogram\n * and the cumulative histogram of the target image.\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @param {CumulativeHistogram} originImageCHistogram Cumulative histogram of imgBuffer\n * @param {CumulativeHistogram} targetImageCHistogram Cumulative histogram of target image\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const histogramSpecification = (\n  imgBuffer,\n  originImageCHistogram,\n  targetImageCHistogram\n) => {\n\n  let normalizedOriginImageCHistogram =\n    originImageCHistogram.counts.map( value =>\n      value / originImageCHistogram.count\n    );\n  \n  let normalizedTargetImageCHistogram =\n    targetImageCHistogram.counts.map( value =>\n      value / targetImageCHistogram.count\n    );\n\n  let lookupTable = [];\n  for (let i = 0; i < 256; ++i) {\n    let j = 255;\n    while(j >= 0 && \n      normalizedOriginImageCHistogram[i] <=\n      normalizedTargetImageCHistogram[j]) {\n\n      j = j - 1;\n    }\n    lookupTable.push(j);\n  }\n\n  return transformImage(imgBuffer, lookupTable);\n}","import { transformImage } from \"./transformImage\";\n\n/**\n * Applies histogram equalization operation to the given image.\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @param {CumulativeHistogram} imageCHistogram Cumulative histogram of the image\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const histogramEqualization = (\n  imgBuffer,\n  imageCHistogram\n) => {\n\n  let equalizationLevel = imageCHistogram.count / 256;\n  let lookupTable = [];\n  for (let i = 0; i < 256; ++i) {\n    lookupTable.push(\n      Math.max(\n        0, \n        Math.round(imageCHistogram.counts[i] / equalizationLevel) - 1\n      )\n    );\n  }\n\n  return transformImage(imgBuffer, lookupTable);\n}","import RgbaImageBuffer from \"../RgbaImageBuffer\";\n\n/**\n * Returns an image buffer of the given region of the given buffer\n *\n * @param {RgbaImageBuffer} imgBuffer Buffer of the image to crop\n * @param {Object} region Region specifying where to crop the given buffer\n * @param {number} region.top Pixel in the y axis where the new image must start\n * @param {number} region.left Pixel in the x axis where the new image must\n * start\n * @param {number} region.height Height of the new image\n * @param {number} region.width Width of the new image\n */\nexport const crop = (\n  imgBuffer,\n  { top = 0, left = 0, height = imgBuffer.height, width = imgBuffer.width } = {}\n) => {\n  const resultPixels = new Uint8ClampedArray(\n    height * width * RgbaImageBuffer.NUM_CHANNELS\n  );\n  let currentIndex = 0;\n\n  for (let yOffset = 0; yOffset < height; yOffset += 1) {\n    for (let xOffset = 0; xOffset < width; xOffset += 1) {\n      const pixel = imgBuffer.getPixel({ x: left + xOffset, y: top + yOffset });\n      resultPixels[currentIndex] = pixel[0];\n      resultPixels[currentIndex + 1] = pixel[1];\n      resultPixels[currentIndex + 2] = pixel[2];\n      resultPixels[currentIndex + 3] = pixel[3];\n      currentIndex += RgbaImageBuffer.NUM_CHANNELS;\n    }\n  }\n\n  return new RgbaImageBuffer(width, height, resultPixels);\n};\n","import RgbaImageBuffer from \"../RgbaImageBuffer\";\nimport {isInRange} from \"../Checks\";\n\n/**\n * Returns the image buffer resulting of rotating the given image buffer.\n * If the rotateAndPaintRotation flag is set to false, the transparent\n * pixels of the resulting image will be filled. The given interpolation\n * method will calculate the values of the new pixels.\n * \n * @param {RgbaImageBuffer} imgBuffer Buffer of the image to rotate\n * @param {Number} degrees Rotation parameter\n * @param {Function} interpolationMethod Interpolation method to calculate the\n * possible new lightness values obtained after applying the geometric operation\n * @param {Boolean} rotateAndPaintRotation Establishes the nature of the rotation\n */\nexport const imageRotation = (\n    imgBuffer,\n    degrees,\n    interpolationMethod,\n    rotateAndPaintRotation\n) => {\n    const width = imgBuffer.width;\n    const height = imgBuffer.height;\n    const radians = degrees * (Math.PI / 180);\n    const directTransformation = (xCoord, yCoord) => {\n        return {\n            x: (Math.cos(radians) * xCoord) - (Math.sin(radians) * yCoord),\n            y: (Math.sin(radians) * xCoord) + (Math.cos(radians) * yCoord)\n        };\n    };\n    const newImageInfo = getRotatedImageInfo(\n        width, \n        height, \n        directTransformation\n    );\n\n    if (rotateAndPaintRotation) {\n        return rotateAndPaint(\n            imgBuffer, \n            directTransformation, \n            newImageInfo\n        );\n    }\n\n    const inverseTransformation = (xCoord, yCoord) => {\n        return {\n            x: (Math.cos(-radians) * xCoord) - (Math.sin(-radians) * yCoord),\n            y: (Math.sin(-radians) * xCoord) + (Math.cos(-radians) * yCoord)\n        };\n    };\n    \n    const resultPixels = new Uint8ClampedArray(\n        newImageInfo.width * newImageInfo.height * RgbaImageBuffer.NUM_CHANNELS\n    );\n    let transformedCoords;\n    let newValue;\n    let currentIndex = 0;\n    for (let j = 0; j < newImageInfo.height; ++j) {\n        for (let i = 0; i < newImageInfo.width; ++i) {\n            transformedCoords = inverseTransformation(\n                i + newImageInfo.minXCoord, \n                j + newImageInfo.minYCoord\n            );\n            if (isInRange(Math.round(transformedCoords.x), 0, width + 1) &&\n                isInRange(Math.round(transformedCoords.y), 0, height + 1)) {\n                \n                newValue = Math.round(interpolationMethod(\n                    transformedCoords.x,\n                    transformedCoords.y,\n                    imgBuffer\n                ));\n                // TODO: colored images\n                // For now we assume we are operating with grayscale images\n                resultPixels[currentIndex]     = newValue; // R channel\n                resultPixels[currentIndex + 1] = newValue; // G channel\n                resultPixels[currentIndex + 2] = newValue; // B channel\n                resultPixels[currentIndex + 3] = 255;      // A channel\n            } else {\n                // Background pixel\n                resultPixels[currentIndex]     = 0; // R channel\n                resultPixels[currentIndex + 1] = 0; // G channel\n                resultPixels[currentIndex + 2] = 0; // B channel\n                resultPixels[currentIndex + 3] = 0;   // A channel\n            }\n            currentIndex += RgbaImageBuffer.NUM_CHANNELS;\n        }\n    }\n    return new RgbaImageBuffer(\n        newImageInfo.width, \n        newImageInfo.height, \n        resultPixels\n    );\n};\n\n/**\n * Returns the image buffer resulting of rotating the given image buffer.\n * It may contain transparent pixels due to the nature of this rotation\n * process, the inverse tranformation it isn't used.\n * \n * @param {RgbaImageBuffer} imgBuffer Buffer of the image to rotate\n * @param {Function} directTransformation Maps the old image pixels\n * positions to the new one positions\n * @param {Object} newImageInfo Contains relevant information about\n * the resulting image\n */\nexport const rotateAndPaint = (\n    imgBuffer,\n    directTransformation,\n    newImageInfo\n) => {\n    const resultPixels = new Uint8ClampedArray(\n        newImageInfo.width * newImageInfo.height * RgbaImageBuffer.NUM_CHANNELS\n    );\n    let transformedCoords;\n    let currentIndex;\n    let originalImagePixel;\n    for (let j = 0; j < imgBuffer.height; ++j) {\n        for (let i = 0; i < imgBuffer.width; ++i) {\n            transformedCoords = directTransformation(i, j);\n            currentIndex = (Math.round(transformedCoords.y - newImageInfo.minYCoord) * \n                newImageInfo.width + Math.round(transformedCoords.x - newImageInfo.minXCoord)) * \n                RgbaImageBuffer.NUM_CHANNELS;\n            // TODO: colored images\n            // For now we assume we are operating with grayscale images\n            originalImagePixel = imgBuffer.getPixel({x: i, y:j});\n            resultPixels[currentIndex]     = originalImagePixel[0]; // R channel\n            resultPixels[currentIndex + 1] = originalImagePixel[1]; // G channel\n            resultPixels[currentIndex + 2] = originalImagePixel[2]; // B channel\n            resultPixels[currentIndex + 3] = originalImagePixel[3]; // A channel\n        }\n    }\n    return new RgbaImageBuffer(\n        newImageInfo.width, \n        newImageInfo.height, \n        resultPixels\n    );\n};\n\n/**\n * Returns information about the rotated image.\n *\n * @param {Number} width Width of the image to rotate\n * @param {Number} height Height of the image to rotate\n * @param {Function} directTransformation Needed to calculate the new dimensions \n */\nexport const getRotatedImageInfo = (\n    width,\n    height,\n    directTransformation\n) => {\n    const upperLeftCornerRotated = directTransformation(0, 0);\n    const lowerLeftCornerRotated = directTransformation(0, height);\n    const upperRightCornerRotated = directTransformation(width, 0);\n    const lowerRightCornerRotated = directTransformation(width, height);\n    const maxXCoord = Math.max(\n        upperLeftCornerRotated.x,\n        lowerLeftCornerRotated.x,\n        upperRightCornerRotated.x,\n        lowerRightCornerRotated.x\n    );\n    const minXCoord = Math.min(\n        upperLeftCornerRotated.x,\n        lowerLeftCornerRotated.x,\n        upperRightCornerRotated.x,\n        lowerRightCornerRotated.x\n    );\n    const maxYCoord = Math.max(\n        upperLeftCornerRotated.y,\n        lowerLeftCornerRotated.y,\n        upperRightCornerRotated.y,\n        lowerRightCornerRotated.y\n    );\n    const minYCoord = Math.min(\n        upperLeftCornerRotated.y,\n        lowerLeftCornerRotated.y,\n        upperRightCornerRotated.y,\n        lowerRightCornerRotated.y\n    );\n\n    return {\n        width:  Math.floor(Math.abs(maxXCoord - minXCoord)),\n        height: Math.floor(Math.abs(maxYCoord - minYCoord)),\n        minXCoord: minXCoord,\n        minYCoord: minYCoord\n    };\n};","import RgbaImageBuffer from \"../RgbaImageBuffer\";\nimport {ImageOperationException} from \"../Exceptions\";\n\n/**\n * Returns the image buffer resulting of resizing the given image buffer.\n * \n * @param {RgbaImageBuffer} imgBuffer Buffer of the image to resize\n * @param {Number} widthPercentage Resizing parameter\n * @param {Number} heightPercentage Resizing parameter\n * @param {Function} interpolationMethod Interpolation method to calculate the\n * possible new lightness values obtained after applying the geometric operation\n */\nexport const imageResizing = (\n  imgBuffer,\n  widthPercentage,\n  heighPercentage,\n  interpolationMethod\n) => {\n  const oldWidth = imgBuffer.width;\n  const oldHeight = imgBuffer.height;\n  const widthFactor = (widthPercentage / 100);\n  const heightFactor = (heighPercentage / 100);\n  const newWidth = Math.floor(oldWidth * widthFactor);\n  const newHeight = Math.floor(oldHeight * heightFactor);\n\n  if (newWidth < 1)\n    throw new ImageOperationException(\"ImageResizingException\", \"Width of the resized image is too small.\");\n  if (newHeight < 1)\n    throw new ImageOperationException(\"ImageResizingException\", \"Height of the resized image is too small.\");\n\n  const inverseTransformation = (xCoord, yCoord) => {\n    return {\n        x: Math.round(xCoord / widthFactor),\n        y: Math.round(yCoord / heightFactor)\n    };\n  };\n\n  const resultPixels = new Uint8ClampedArray(\n    newWidth * newHeight * RgbaImageBuffer.NUM_CHANNELS\n  );\n  let transformedCoords;\n  let newValue;\n  let currentIndex = 0;\n  for (let j = 0; j < newHeight; ++j) {\n    for (let i = 0; i < newWidth; ++i) {\n      transformedCoords = inverseTransformation(i, j);\n      newValue = Math.round(interpolationMethod(\n        transformedCoords.x,\n        transformedCoords.y,\n        imgBuffer\n      ));\n      resultPixels[currentIndex]     = newValue;\n      resultPixels[currentIndex + 1] = newValue;\n      resultPixels[currentIndex + 2] = newValue;\n      resultPixels[currentIndex + 3] = 255;\n      currentIndex += RgbaImageBuffer.NUM_CHANNELS;\n    }\n  }\n  return new RgbaImageBuffer(\n    newWidth, \n    newHeight, \n    resultPixels\n);\n};","import RgbaImageBuffer from \"../RgbaImageBuffer\";\n\n/**\n * Applies horizontal mirror operation to the given image.\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const horizontalMirror = (\n  imgBuffer\n) => {\n  const width = imgBuffer.width;\n  const height = imgBuffer.height;\n  const resultPixels = new Uint8ClampedArray(\n    width * height * RgbaImageBuffer.NUM_CHANNELS\n  );\n  let currentIndex = 0;\n  let originalImagePixel;\n  for (let j = height - 1; j >= 0; --j) {\n    for (let i = 0; i < width; ++i) {\n      originalImagePixel = imgBuffer.getPixel({x: i, y:j});\n      resultPixels[currentIndex]     = originalImagePixel[0]; // R channel\n      resultPixels[currentIndex + 1] = originalImagePixel[1]; // G channel\n      resultPixels[currentIndex + 2] = originalImagePixel[2]; // B channel\n      resultPixels[currentIndex + 3] = originalImagePixel[3]; // A channel\n      currentIndex += RgbaImageBuffer.NUM_CHANNELS;\n    }\n  }\n\n  return new RgbaImageBuffer(\n    width, \n    height, \n    resultPixels\n  );\n}\n\n/**\n * Applies vertical mirror operation to the given image.\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const verticalMirror = (\n  imgBuffer\n) => {\n  const width = imgBuffer.width;\n  const height = imgBuffer.height;\n  const resultPixels = new Uint8ClampedArray(\n    width * height * RgbaImageBuffer.NUM_CHANNELS\n  );\n  let currentIndex = 0;\n  let originalImagePixel;\n  for (let j = 0; j < height; ++j) {\n    for (let i = width - 1; i >= 0; --i) {\n      originalImagePixel = imgBuffer.getPixel({x: i, y:j});\n      resultPixels[currentIndex]     = originalImagePixel[0]; // R channel\n      resultPixels[currentIndex + 1] = originalImagePixel[1]; // G channel\n      resultPixels[currentIndex + 2] = originalImagePixel[2]; // B channel\n      resultPixels[currentIndex + 3] = originalImagePixel[3]; // A channel\n      currentIndex += RgbaImageBuffer.NUM_CHANNELS;\n    }\n  }\n\n  return new RgbaImageBuffer(\n    width, \n    height, \n    resultPixels\n  );\n}","import RgbaImageBuffer from \"../RgbaImageBuffer\";\n\n/**\n * Applies image transpose operation to the given image.\n *\n * @param {RgbaImageBuffer} imgBuffer Image to transform\n * @returns {RgbaImageBuffer} Transformed image\n */\nexport const imageTranspose = (\n  imgBuffer\n) => {\n  const height = imgBuffer.width;\n  const width = imgBuffer.height;\n  const resultPixels = new Uint8ClampedArray(\n    width * height * RgbaImageBuffer.NUM_CHANNELS\n  );\n  let currentIndex = 0;\n  let originalImagePixel;\n  for (let j = 0; j < height; ++j) {\n    for (let i = 0; i < width; ++i) {\n      originalImagePixel = imgBuffer.getPixel({x: j, y:i});\n      resultPixels[currentIndex]     = originalImagePixel[0]; // R channel\n      resultPixels[currentIndex + 1] = originalImagePixel[1]; // G channel\n      resultPixels[currentIndex + 2] = originalImagePixel[2]; // B channel\n      resultPixels[currentIndex + 3] = originalImagePixel[3]; // A channel\n      currentIndex += RgbaImageBuffer.NUM_CHANNELS;\n    }\n  }\n\n  return new RgbaImageBuffer(\n    width, \n    height , \n    resultPixels\n  );\n}","import { ImageLoadException } from \"./Exceptions\";\n\n/**\n * Returns an promise that resolves with\n * an image when it is loaded from the given source\n *\n * @param {string} src Image source\n * @returns {Promise<Image>} Image element after the content has\n * been loaded\n */\nexport function load(src) {\n  const image = new Image();\n  image.src = src;\n\n  return new Promise((resolve, reject) => {\n    image.onload = () => resolve(image);\n    image.onerror = () => reject(new ImageLoadException(src));\n  });\n}\n\n/**\n * Given a File, Blob object or any other object accepted by\n * `URL.createObjectURL`, returns the image loaded from the\n * object source\n *\n * @param {Object} obj Object to get the image source URL\n */\nexport function loadFromObject(obj) {\n  const src = URL.createObjectURL(obj);\n  return load(src).finally(() => URL.revokeObjectURL(src));\n}\n","import GRID_PROPERTIES from \"./gridProperties\";\n\n/**\n * Returns an emoty object of layouts for different viewport sizes, as defined\n * in GRID_PROPERTIES.\n */\nconst createNewSetOfLayouts = () => {\n  const layouts = {};\n\n  Object.keys(GRID_PROPERTIES.GRID_COLUMNS).forEach(\n    layoutName => (layouts[layoutName] = [])\n  );\n\n  return layouts;\n};\n\n/**\n * Returns an object defining the default information for being part of a grid\n * layout\n */\nconst createNewElementLayoutInfo = id => ({\n  i: id,\n  x: 0,\n  y: Infinity,\n  w: GRID_PROPERTIES.DEFAULT_GRID_ITEM_COLS,\n  h: GRID_PROPERTIES.DEFAULT_GRID_ITEM_ROWS,\n  minW: GRID_PROPERTIES.DEFAULT_GRID_ITEM_COLS,\n  minH: GRID_PROPERTIES.DEFAULT_GRID_ITEM_ROWS\n});\n\n/**\n * Returns a new set set of layouts resulting from adding a default layout\n * information for the new elements with the given IDs\n *\n * @param {Object} currentLayouts Layouts object to where the new element\n * information is going to be added\n * @param {Array<String | number>} newElementsIds IDs of the elements to add to\n * the layout\n */\nconst addNewElementsToLayouts = (currentLayouts, newElementsIds) => {\n  const newElementsLayoutInfos = newElementsIds.map(createNewElementLayoutInfo);\n  const newLayouts = createNewSetOfLayouts();\n\n  Object.keys(currentLayouts).forEach(layoutName => {\n    newLayouts[layoutName] = currentLayouts[layoutName].concat(\n      newElementsLayoutInfos\n    );\n  });\n\n  return newLayouts;\n};\n\n/**\n * Returns a new set of layouts without the elements with the given IDs\n *\n * @param {Object} currentLayouts Layouts object\n * @param {Array<String | number>} ids IDs of the elements to remove\n */\nconst removeElementsFromLayout = (currentLayouts, ids) => {\n  const newLayouts = {};\n\n  Object.keys(currentLayouts).forEach(layoutName => {\n    newLayouts[layoutName] = currentLayouts[layoutName].filter(\n      ({ i }) => !ids.includes(i)\n    );\n  });\n\n  return newLayouts;\n};\n\nexport {\n  createNewSetOfLayouts,\n  addNewElementsToLayouts,\n  removeElementsFromLayout\n};\n","/**\n * Class to represent an image cumulative histogram.\n */\nexport default class CumulativeHistogram {\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Array} histogram Array of values of the histogram to create the\n   * cumulative from\n   */\n  constructor(histogram) {\n    let count = 0;\n\n    this.counts = histogram.map(value => {\n      count += value;\n      return count;\n    });\n    this.count = count;\n  }\n}\n","import React, { Component } from \"react\";\nimport InteractiveGrid from \"../InteractiveGrid\";\nimport ImageComponent from \"../ImageComponent\";\nimport HistogramAndInfoComponent from \"../HistogramAndInfoComponent\";\nimport AppToolbar from \"../Toolbar\";\nimport Histogram from \"../../lib/Histogram\";\nimport { imageToGrayscale } from \"../../lib/ImageProcessing/grayscale\";\nimport { linearTransformation } from \"../../lib/ImageProcessing/linearTransformation\";\nimport { brightnessAndContrastAdjustment } from \"../../lib/ImageProcessing/brightnessAndContrastAdjustment\";\nimport { gammaCorrection } from \"../../lib/ImageProcessing/gammaCorrection\";\nimport { imagesDifference } from \"../../lib/ImageProcessing/imagesDifference\";\nimport { changesDetection } from \"../../lib/ImageProcessing/changesDetection\";\nimport { histogramSpecification } from \"../../lib/ImageProcessing/histogramSpecification\";\nimport { histogramEqualization } from \"../../lib/ImageProcessing/histogramEqualization\";\nimport { crop } from \"../../lib/ImageProcessing/crop\";\nimport InterpolationMethods from \"../../lib/ImageProcessing/interpolationMethods\";\nimport { imageRotation } from \"../../lib/ImageProcessing/imageRotation\";\nimport { imageResizing } from \"../../lib/ImageProcessing/imageResizing\";\nimport { verticalMirror, horizontalMirror } from \"../../lib/ImageProcessing/mirrorOperations\";\nimport { imageTranspose } from \"../../lib/ImageProcessing/imageTranspose\";\nimport * as ImageHelper from \"../../lib/imageHelper\";\nimport * as GridLayoutHelper from \"../../lib/grid/calculateLayout\";\nimport RgbaImageBuffer from \"../../lib/RgbaImageBuffer\";\nimport CumulativeHistogram from \"../../lib/CumulativeHistogram\";\nimport \"./App.css\";\nimport { withSnackbar } from \"notistack\";\n\nclass App extends Component {\n  state = {\n    /** All the information relative to the images loaded */\n    imagesInfos: [],\n    /** All the information relative to the histograms of each image */\n    histogramInfos: [],\n    /** Grid layouts for the elements on screen */\n    gridLayouts: GridLayoutHelper.createNewSetOfLayouts(),\n    /** Information of the current grid item being selected (item type & index) */\n    selectedGridItem: { type: \"\", index: -1 },\n    /** Coordenates of the pixel that was last being pointed by the mouse */\n    pixelCoords: { x: 0, y: 0 },\n    /** Value of the pixel that was last being pointed by the mouse */\n    pixelValue: [0, 0, 0, 255],\n    /** Amount of removed images, needed for proper indexing images on the grid */\n    removedImagesCount: 0\n  };\n\n  /**\n   * Notify the user of the given message with the given type\n   *\n   * @param {String} messageType Message type (error, warning, info, success)\n   * @param {String} message  Message to show to the user\n   *\n   */\n  notify = (messageType, message) => {\n    // \"enqueueSnackbar\" is provided by the \"withSnackbar\" Higher Order\n    // Component\n    this.props.enqueueSnackbar(message, {\n      variant: messageType\n    });\n  };\n\n  /** Callback that updates the pixel value and coordinates currently under the\n   * user's mouse */\n  onMouseMoveOverImage = (pixelCoords, pixelValue) => {\n    this.setState({ pixelCoords, pixelValue });\n  };\n\n  /** Returns a callback that updates the region of the asked image info */\n  onImageRegionSelection = index => newRegion => {\n    this.setState(prevState => ({\n      imagesInfos: prevState.imagesInfos.map((info, i) =>\n        i === index ? { ...info, region: newRegion } : info\n      )\n    }));\n  };\n\n  /**  Adds all the information related to the given image buffer to the app */\n  addNewImage = imageBuffer => {\n    // TODO: Update the Histogram so it doesn't need grayscale images\n    const imageSection = {\n      top: 0,\n      left: 0,\n      width: imageBuffer.width,\n      height: imageBuffer.height\n    };\n    const histogram = new Histogram(imageToGrayscale(imageBuffer));\n    const cHistogram = new CumulativeHistogram(histogram.histogramValues);\n    const imageKey = `Image ${this.state.imagesInfos.length +\n      this.state.removedImagesCount}`;\n    const histogramKey = `Histogram ${this.state.histogramInfos.length +\n      this.state.removedImagesCount}`;\n\n    this.setState(prevState => ({\n      imagesInfos: prevState.imagesInfos.concat([\n        { key: imageKey, imageBuffer, region: imageSection }\n      ]),\n      histogramInfos: prevState.histogramInfos.concat([\n        { key: histogramKey, histogram, cHistogram, visible: false }\n      ]),\n      gridLayouts: GridLayoutHelper.addNewElementsToLayouts(\n        prevState.gridLayouts,\n        [imageKey]\n      )\n    }));\n  };\n\n  /** Listener for a file input event to load the input image to the application */\n  onNewImageFromFile = event => {\n    const files = event.target.files;\n\n    if (files.length !== 1 || !files[0]) {\n      this.notify(\"error\", \"Error reading image file\");\n      return;\n    }\n\n    // Try to get the image and draw it to the canvas. If there is an error\n    // update the state.error\n    ImageHelper.loadFromObject(files[0])\n      .then(image => {\n        const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n\n        canvas.width = image.naturalWidth;\n        canvas.height = image.naturalHeight;\n        context.drawImage(image, 0, 0);\n\n        const imgData = context.getImageData(0, 0, canvas.width, canvas.height);\n        const imageBuffer = RgbaImageBuffer.fromImageData(imgData);\n        this.addNewImage(imageBuffer);\n      })\n      .catch(() => {\n        this.notify(\"error\", \"Could not load image\");\n      });\n  };\n\n  /** Returns whether the given item is selected or not */\n  isGridItemSelected = (type, index) =>\n    this.state.selectedGridItem.index === index &&\n    this.state.selectedGridItem.type === type;\n\n  /** When the user resizes or moves a grid item, we need to update the layout\n   * state */\n  onGridLayoutChange = (_, newLayouts) =>\n    requestAnimationFrame(() => this.setState({ gridLayouts: newLayouts }));\n\n  /** Returns a function that, when the user selects an image grid item, updates\n   * the selected item state */\n  onGridItemSelection = type => index =>\n    this.setState({ selectedGridItem: { type, index } });\n\n  /** Removes the image in the given position and all its related information\n   * like the histogram */\n  deleteAllImageRelatedInfo = index => {\n    this.setState(prevState => {\n      const newLayouts = GridLayoutHelper.removeElementsFromLayout(\n        prevState.gridLayouts,\n        [prevState.histogramInfos[index].key, prevState.imagesInfos[index].key]\n      );\n      let newSelectedItem = { ...prevState.selectedGridItem };\n\n      // We are removing an element from an array, we have to update the\n      // selected item index if it is the element removed or after it\n      if (index <= newSelectedItem.index) {\n        newSelectedItem.index -= 1;\n        if (newSelectedItem.index < 0) {\n          newSelectedItem.type = \"\";\n        }\n      }\n\n      return {\n        histogramInfos: prevState.histogramInfos.filter((_, i) => i !== index),\n        imagesInfos: prevState.imagesInfos.filter((_, i) => i !== index),\n        gridLayouts: newLayouts,\n        selectedGridItem: newSelectedItem,\n        removedImagesCount: prevState.removedImagesCount + 1\n      };\n    });\n  };\n\n  /** Hides the given histogram from the view */\n  hideHistogram = index => {\n    // Set the visibility to false, remove its layout information and resets the\n    // current selected item if it was the histogram to hide\n    this.setState(prevState => ({\n      histogramInfos: prevState.histogramInfos.map((histogramInfo, i) =>\n        i === index\n          ? { ...histogramInfo, visible: false }\n          : { ...histogramInfo }\n      ),\n      gridLayouts: GridLayoutHelper.removeElementsFromLayout(\n        prevState.gridLayouts,\n        [prevState.histogramInfos[index].key]\n      ),\n      selectedGridItem: this.isGridItemSelected(\"histogram\", index)\n        ? { type: \"\", index: -1 }\n        : prevState.selectedGridItem\n    }));\n  };\n\n  showHistogramOfCurrentImage = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.setState(prevState => ({\n        histogramInfos: prevState.histogramInfos.map((histogramInfo, i) =>\n          i === index\n            ? { ...histogramInfo, visible: true }\n            : { ...histogramInfo }\n        ),\n        gridLayouts: GridLayoutHelper.addNewElementsToLayouts(\n          prevState.gridLayouts,\n          [prevState.histogramInfos[index].key]\n        )\n      }));\n    }\n  };\n\n  /** Downloads the selected region of the current selected image if any */\n  downloadCurrentImage = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      const imgInfo = this.state.imagesInfos[index];\n      const { left, top, width, height } = imgInfo.region;\n      const imageData = imgInfo.imageBuffer.toImageData();\n      const canvas = document.createElement(\"canvas\");\n      const context = canvas.getContext(\"2d\");\n\n      canvas.width = imageData.width;\n      canvas.height = imageData.height;\n      context.putImageData(imageData, 0, 0, left, top, width, height);\n\n      canvas.toBlob(\n        blob => {\n          const imgUrl = URL.createObjectURL(blob);\n          this.refs.downloadAnchor.href = imgUrl;\n          this.refs.downloadAnchor.click();\n          URL.revokeObjectURL(imgUrl);\n        },\n        null,\n        1\n      );\n    }\n  };\n\n  currentImageToGrayscale = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        imageToGrayscale(this.state.imagesInfos[index].imageBuffer)\n      );\n    }\n  };\n\n  currentImageLinearTransformation = coordinates => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        linearTransformation(\n          this.state.imagesInfos[index].imageBuffer,\n          coordinates\n        )\n      );\n    }\n  };\n\n  currentImageBrightnessAndContrastAdjustment = (\n    newBrightness,\n    newContrast\n  ) => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        brightnessAndContrastAdjustment(\n          this.state.imagesInfos[index].imageBuffer,\n          this.state.histogramInfos[index].histogram.histogramInfo.mean,\n          this.state.histogramInfos[index].histogram.histogramInfo.stdDev,\n          newBrightness,\n          newContrast\n        )\n      );\n    }\n  };\n\n  currentImageGammaCorrection = gammaValue => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        gammaCorrection(this.state.imagesInfos[index].imageBuffer, gammaValue)\n      );\n    }\n  };\n\n  applyImagesDifference = otherImgName => {\n    const { type, index } = this.state.selectedGridItem;\n    const otherImageInfo = this.state.imagesInfos.find(\n      ({ key }) => key === otherImgName\n    );\n    const imageBuffer = otherImageInfo && otherImageInfo.imageBuffer;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else if (imageBuffer === undefined) {\n      this.notify(\n        \"error\",\n        `Couldn't find an image with the selected name (${otherImgName})`\n      );\n    } else {\n      this.addNewImage(\n        imagesDifference(this.state.imagesInfos[index].imageBuffer, imageBuffer)\n      );\n    }\n  };\n\n  applyChangesDetection = ({ imgName, rgbaColor, threshold }) => {\n    const { type, index } = this.state.selectedGridItem;\n    const otherImageInfo = this.state.imagesInfos.find(\n      ({ key }) => key === imgName\n    );\n    const imageBuffer = otherImageInfo && otherImageInfo.imageBuffer;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else if (imageBuffer === undefined) {\n      this.notify(\n        \"error\",\n        `Couldn't find an image with the selected name (${imgName})`\n      );\n    } else {\n      this.addNewImage(\n        changesDetection(\n          this.state.imagesInfos[index].imageBuffer,\n          imageBuffer,\n          threshold,\n          rgbaColor\n        )\n      );\n    }\n  };\n\n  applyHistogramSpecification = otherImgName => {\n    const { type, index } = this.state.selectedGridItem;\n    const otherImgIndex = this.state.imagesInfos.findIndex(\n      ({ key }) => key === otherImgName\n    );\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else if (\n      otherImgIndex < 0 ||\n      otherImgIndex > this.state.imagesInfos.length\n    ) {\n      this.notify(\n        \"error\",\n        `Couldn't find an image with the selected name (${otherImgName})`\n      );\n    } else {\n      this.addNewImage(\n        histogramSpecification(\n          this.state.imagesInfos[index].imageBuffer,\n          this.state.histogramInfos[index].cHistogram,\n          this.state.histogramInfos[otherImgIndex].cHistogram\n        )\n      );\n    }\n  };\n\n  currentImageHistogramEqualization = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        histogramEqualization(\n          this.state.imagesInfos[index].imageBuffer,\n          this.state.histogramInfos[index].cHistogram\n        )\n      );\n    }\n  };\n\n  cropCurrentImage = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        crop(\n          this.state.imagesInfos[index].imageBuffer,\n          this.state.imagesInfos[index].region\n        )\n      );\n    }\n  };\n\n  rotateCurrentImage = ({degrees, rotateAndPaint, interpolationMethod}) => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        imageRotation(\n          this.state.imagesInfos[index].imageBuffer,\n          degrees,\n          InterpolationMethods[interpolationMethod],\n          rotateAndPaint\n        )\n      );\n    }\n  };\n\n  resizeCurrentImage = ({widthPercentage, heightPercentage, interpolationMethod}) => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        imageResizing(\n          this.state.imagesInfos[index].imageBuffer,\n          widthPercentage,\n          heightPercentage,\n          InterpolationMethods[interpolationMethod]\n        )\n      );\n    }\n  };\n\n  currentImageVerticalMirror = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        verticalMirror(\n          this.state.imagesInfos[index].imageBuffer,\n        )\n      );\n    }\n  };\n\n  currentImageHorizontalMirror = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        horizontalMirror(\n          this.state.imagesInfos[index].imageBuffer,\n        )\n      );\n    }\n  };\n\n  applyImageTranspose = () => {\n    const { type, index } = this.state.selectedGridItem;\n\n    if (type !== \"image\" || index < 0) {\n      this.notify(\"warning\", \"You first need to select an image\");\n    } else {\n      this.addNewImage(\n        imageTranspose(\n          this.state.imagesInfos[index].imageBuffer,\n        )\n      );\n    }\n  }\n\n  render() {\n    const { index } = this.state.selectedGridItem;\n    let selectedImageInfo = {\n      width: (index >= 0) ?\n        this.state.imagesInfos[index].imageBuffer.width : 0,\n      height: (index >= 0) ?\n        this.state.imagesInfos[index].imageBuffer.height : 0,\n      brightness: (index >= 0) ?\n        this.state.histogramInfos[index].histogram.histogramInfo.mean : 0,\n      contrast: (index >= 0) ?\n        this.state.histogramInfos[index].histogram.histogramInfo.stdDev : 0\n    };\n    return (\n      <div>\n        <div className=\"app-container\">\n          <AppToolbar\n            selectedImageInfo={selectedImageInfo}\n            activeImagesNames={this.state.imagesInfos.map(img => img.key)}\n            onFileInput={this.onNewImageFromFile}\n            onShowHistogram={this.showHistogramOfCurrentImage}\n            onDownload={this.downloadCurrentImage}\n            onGrayscale={this.currentImageToGrayscale}\n            linearTransformation={this.currentImageLinearTransformation}\n            brightnessAndContrastAdjustment={\n              this.currentImageBrightnessAndContrastAdjustment\n            }\n            gammaCorrection={this.currentImageGammaCorrection}\n            imagesDifference={this.applyImagesDifference}\n            changesDetection={this.applyChangesDetection}\n            histogramSpecification={this.applyHistogramSpecification}\n            histogramEqualization={this.currentImageHistogramEqualization}\n            onCrop={this.cropCurrentImage}\n            interpolationMethods={Object.keys(InterpolationMethods)}\n            imageRotation={this.rotateCurrentImage}\n            imageResizing={this.resizeCurrentImage}\n            verticalMirror={this.currentImageVerticalMirror}\n            horizontalMirror={this.currentImageHorizontalMirror}\n            imageTranspose={this.applyImageTranspose}\n          />\n          <main className=\"main\">\n            <div className=\"main__wrapper\">{this.getGridComponent()}</div>\n          </main>\n          <footer className=\"footer\">\n            {this.getDisplayForPixelUnderMouse()}\n          </footer>\n        </div>\n        <div>\n          <a\n            ref=\"downloadAnchor\"\n            href=\"#download\"\n            id=\"download\"\n            hidden\n            download\n          >\n            This should not be visible. It is only used when downloading images\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  // Methods to keep the render method cleaner\n\n  getGridComponent() {\n    return (\n      <InteractiveGrid.Grid\n        layouts={this.state.gridLayouts}\n        onLayoutChange={this.onGridLayoutChange}\n      >\n        {this.state.imagesInfos.map((image, index) =>\n          this.getImageGridItem(image, index)\n        )}\n        {this.state.histogramInfos\n          .map((histogramInfo, index) =>\n            histogramInfo.visible\n              ? this.getHistogramGridItem(histogramInfo, index)\n              : null\n          )\n          .filter(element => element !== null)}\n      </InteractiveGrid.Grid>\n    );\n  }\n\n  getImageGridItem({ imageBuffer, key }, index) {\n    return (\n      <InteractiveGrid.Item\n        key={key}\n        id={index}\n        name={key}\n        onDelete={this.deleteAllImageRelatedInfo}\n        onSelect={this.onGridItemSelection(\"image\")}\n        isSelected={this.isGridItemSelected(\"image\", index)}\n      >\n        <div className=\"center\">\n          <div className=\"scrollable\">\n            <ImageComponent\n              rgbaImage={imageBuffer}\n              onMouseMove={this.onMouseMoveOverImage}\n              onSelection={this.onImageRegionSelection(index)}\n            />\n          </div>\n        </div>\n      </InteractiveGrid.Item>\n    );\n  }\n\n  getHistogramGridItem({ histogram, cHistogram, key }, index) {\n    return (\n      <InteractiveGrid.Item\n        key={key}\n        id={index}\n        name={key}\n        onDelete={this.hideHistogram}\n        onSelect={this.onGridItemSelection(\"histogram\")}\n        isSelected={this.isGridItemSelected(\"histogram\", index)}\n      >\n        <HistogramAndInfoComponent\n          histogram={histogram}\n          cHistogram={cHistogram}\n        />\n      </InteractiveGrid.Item>\n    );\n  }\n\n  getDisplayForPixelUnderMouse() {\n    const currentPixelRgbaValue = `rgba(${this.state.pixelValue.join(\", \")})`;\n    const { type, index } = this.state.selectedGridItem;\n    const sizeText = (this.state.imagesInfos[index] && type === \"image\") ?\n      \"width: \" + this.state.imagesInfos[index].region.width + \", \" +\n      \"height: \" + this.state.imagesInfos[index].region.height + \", \" :\n      \"\";\n    return (\n      <div\n        style={{\n          display: \"inline-block\",\n          margin: \"0.5rem\",\n          padding: \"0.5rem\",\n          borderRadius: \"5px\",\n          border: `1px solid ${currentPixelRgbaValue}`,\n          boxShadow: `0 3px 10px -3px ${currentPixelRgbaValue}`\n        }}\n      >\n        {sizeText}\n        x: {this.state.pixelCoords.x}, y: {this.state.pixelCoords.y},\n        <span\n          style={{\n            display: \"inline-block\",\n            width: \"0.5rem\",\n            height: \"0.5rem\",\n            margin: \"0 0.5rem\",\n            backgroundColor: currentPixelRgbaValue,\n            border: \"1px solid black\",\n            borderRadius: \"2px\"\n          }}\n        />\n        {currentPixelRgbaValue}\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"./index.css\";\n\n// react-grid-layout CSS classes\nimport \"../node_modules/react-grid-layout/css/styles.css\";\nimport \"../node_modules/react-resizable/css/styles.css\";\n\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport { SnackbarProvider } from \"notistack\";\nimport Button from \"@material-ui/core/Button\";\n\n// Material UI color theme\nconst theme = createMuiTheme({\n  palette: {\n    common: { black: \"#000\", white: \"#fff\" },\n    background: { paper: \"#fff\", default: \"#fafafa\" },\n    primary: {\n      light: \"#7986cb\",\n      main: \"#3f51b5\",\n      dark: \"#303f9f\",\n      contrastText: \"#fff\"\n    },\n    secondary: {\n      light: \"#ff4081\",\n      main: \"#f50057\",\n      dark: \"#c51162\",\n      contrastText: \"#fff\"\n    },\n    error: {\n      light: \"#e57373\",\n      main: \"#f44336\",\n      dark: \"#d32f2f\",\n      contrastText: \"#fff\"\n    },\n    text: {\n      primary: \"rgba(0, 0, 0, 0.87)\",\n      secondary: \"rgba(0, 0, 0, 0.54)\",\n      disabled: \"rgba(0, 0, 0, 0.38)\",\n      hint: \"rgba(0, 0, 0, 0.38)\"\n    }\n  },\n  typography: {\n    useNextVariants: true\n  }\n});\n\nReactDOM.render(\n  <div>\n    <MuiThemeProvider theme={theme}>\n      <SnackbarProvider\n        maxSnack={5}\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\"\n        }}\n        action={[\n          <Button color=\"inherit\" size=\"small\" key={Date.now()}>\n            Dismiss\n          </Button>\n        ]}\n      >\n        <App />\n      </SnackbarProvider>\n    </MuiThemeProvider>\n  </div>,\n  document.getElementById(\"root\")\n);\n","/** \n * Returns the light value of the closest pixel of the given coordinates.\n * It retrieves the third element of the pixel assuming that no matters what\n * RGB channel you choose for grayscale images and in case of operate with\n * colored images (HSL), the third channel corresponds with the Lightness.\n */\nconst closestNeighbourInterpolation = (xCoord, yCoord, imgBuffer) =>\n    imgBuffer.getPixel({x: Math.round(xCoord), y: Math.round(yCoord)})[2];\n\n\n/** \n * Returns the light value of the given coordinates assuming that the light\n * values of the closest pixels vary linearly.\n * It retrieves the third elements of the pixels assuming that no matters what\n * RGB channel you choose for grayscale images and in case of operate with\n * colored images (HSL), the third channel corresponds with the Lightness.\n */\nconst bilinearInterpolation = (xCoord, yCoord, imgBuffer) => {\n    const A = imgBuffer.getPixel({x: Math.floor(xCoord), y: Math.ceil(yCoord)})[2];\n    const B = imgBuffer.getPixel({x: Math.ceil(xCoord), y: Math.ceil(yCoord)})[2];\n    const C = imgBuffer.getPixel({x: Math.floor(xCoord), y: Math.floor(yCoord)})[2];\n    const D = imgBuffer.getPixel({x: Math.ceil(xCoord), y: Math.floor(yCoord)})[2];\n    const p = xCoord - Math.floor(xCoord);\n    const q = yCoord - Math.floor(yCoord);\n\n\n    return C + ((D - C) * p) + ((A - C) * q) + ((B + C - A - D) * p * q);\n};\n\nmodule.exports = {\n    \"Bilinear\": bilinearInterpolation,\n    \"Closest Neighbour\": closestNeighbourInterpolation\n};"],"sourceRoot":""}